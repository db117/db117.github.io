import{_ as e,c as o,b as s,d as a,t as l,a as t,o as p}from"./app.5745f82f.js";const b=JSON.parse('{"title":"postman预请求处理","description":"","frontmatter":{"title":"postman预请求处理"},"headers":[{"level":3,"title":"内置动态变量","slug":"内置动态变量","link":"#内置动态变量","children":[]},{"level":3,"title":"常用操作","slug":"常用操作","link":"#常用操作","children":[]},{"level":3,"title":"常见参数获取","slug":"常见参数获取","link":"#常见参数获取","children":[]}],"relativePath":"util/postman-pre-request.md","lastUpdated":1677837613000}'),r={name:"util/postman-pre-request.md"},c=s("p",null,[s("a",{href:"https://learning.postman.com/docs/getting-started/introduction/",target:"_blank",rel:"noreferrer"},"官方文档")],-1),i=s("h3",{id:"内置动态变量",tabindex:"-1"},[a("内置动态变量 "),s("a",{class:"header-anchor",href:"#内置动态变量","aria-hidden":"true"},"#")],-1),d=s("p",null,[s("a",{href:"https://learning.postman.com/docs/writing-scripts/script-references/variables-list/",target:"_blank",rel:"noreferrer"},"Dynamic variables | Postman Learning Center")],-1),y=s("p",null,[a("在脚本中使用需要用"),s("code",null,"pm.environment.replaceIn(variableName:String)"),a("替换，")],-1),A=t(`<ul><li><strong><code>$guid </code></strong> ：uuid</li><li><strong><code>$timestamp</code></strong>：时间戳（秒）</li><li><strong><code>$isoTimestamp</code></strong>：2020-06-09T21:10:36.177Z</li><li><strong><code>$randomUUID</code></strong>：uuid</li><li><strong><code>$randomAlphaNumeric</code></strong>：随机字母数字</li><li><strong><code>$randomBoolean</code></strong>：随机生成 true|false</li><li><strong><code>$randomInt</code></strong>：随机生成[0,1000]</li><li><strong><code>$randomColor</code></strong>:随机生成颜色，&quot;red&quot;，&quot;fuchsia&quot;，&quot;grey&quot;等</li><li><strong><code>$randomHexColor</code></strong>：随机生成颜色，&quot;#47594a&quot;</li><li><strong><code>$randomAbbreviation</code></strong>：随机生成缩写，SQL，JSON</li><li><strong><code>$randomIP</code></strong>：随机生成 ipv4</li><li><strong><code>$randomIPV6</code></strong>：随机生成 IPv6</li><li><strong><code>$randomMACAddress</code></strong>：随机生成 MAC</li><li><strong><code>$randomPassword</code></strong>：随机生成一个密码，包含字母数字</li><li><strong><code>$randomLocale</code></strong>：随机生成语言编码，“zh”</li><li><strong><code>$randomUserAgent</code></strong>：随机生成 user agent</li><li><strong><code>$randomProtocol</code></strong>：随机生成网络协议，&quot;http&quot;，&quot;https&quot;</li></ul><hr><h3 id="常用操作" tabindex="-1">常用操作 <a class="header-anchor" href="#常用操作" aria-hidden="true">#</a></h3><h4 id="设置属性" tabindex="-1">设置属性 <a class="header-anchor" href="#设置属性" aria-hidden="true">#</a></h4><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">pm.environment.set(&quot;key&quot;, value);</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><h4 id="生成sign" tabindex="-1">生成sign <a class="header-anchor" href="#生成sign" aria-hidden="true">#</a></h4><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> accessToken</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">CryptoJS</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">MD5</span><span style="color:#A6ACCD;">(pivateKey</span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;">date</span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;">JSON</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">stringify</span><span style="color:#A6ACCD;">(param</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">biz_params))</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toString</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h4 id="添加header" tabindex="-1">添加header <a class="header-anchor" href="#添加header" aria-hidden="true">#</a></h4><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">pm.request.headers.add({</span></span>
<span class="line"><span style="color:#A6ACCD;">  key: &quot;aad-accesstoken&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">  value: &quot;{{aad-accesstoken}}&quot;});</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><hr><h3 id="常见参数获取" tabindex="-1">常见参数获取 <a class="header-anchor" href="#常见参数获取" aria-hidden="true">#</a></h3><h4 id="获取时间" tabindex="-1">获取时间 <a class="header-anchor" href="#获取时间" aria-hidden="true">#</a></h4><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> moment </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">moment</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> date </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">moment</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">format</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">YYYYMMDDHHmmss</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h4 id="随机数" tabindex="-1">随机数 <a class="header-anchor" href="#随机数" aria-hidden="true">#</a></h4><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">// 随机数 </span></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> randomNumber </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> Math</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">round</span><span style="color:#A6ACCD;">(Math</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">random</span><span style="color:#A6ACCD;">() </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1000000</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">100000</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h4 id="获取请求body" tabindex="-1">获取请求body <a class="header-anchor" href="#获取请求body" aria-hidden="true">#</a></h4><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">// 请求参数</span></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> obj </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> pm</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">request</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">body</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">raw</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> param </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> JSON</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">parse</span><span style="color:#A6ACCD;">(obj)</span></span>
<span class="line"></span></code></pre></div>`,17);function C(n,D,h,u,g,F){return p(),o("div",null,[c,i,s("blockquote",null,[d,y,s("p",null,[a("如"),s("code",null,'var timestamp = pm.environment.replaceIn("'+l(n.$timestamp)+'");',1)])]),A])}const v=e(r,[["render",C]]);export{b as __pageData,v as default};
