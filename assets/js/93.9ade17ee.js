(window.webpackJsonp=window.webpackJsonp||[]).push([[93],{515:function(t,n,s){"use strict";s.r(n);var a=s(34),e=Object(a.a)({},(function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h3",{attrs:{id:"oap-server"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#oap-server"}},[t._v("#")]),t._v(" oap server")]),t._v(" "),s("blockquote",[s("p",[s("a",{attrs:{href:"https://github.com/apache/skywalking",target:"_blank",rel:"noopener noreferrer"}},[t._v("apache/skywalking: APM, Application Performance Monitoring System (github.com)"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"https://skywalking.apache.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Apache SkyWalking"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("服务端主流程源码分析。")])]),t._v(" "),s("h4",{attrs:{id:"目录结构"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#目录结构"}},[t._v("#")]),t._v(" 目录结构")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("oap-server\n├── analyzer\t\t\t\t\t\t\t\t\t数据分析模块\n│   ├── agent-analyzer\t\t\t\t分析客户端发送的jvm，指标，trace 数据\n│   ├── event-analyzer\t\t\t\t分析事件\n│   ├── log-analyzer\t\t\t\t\t分析日志\n│   ├── meter-analyzer\t\t\t\t分析特定指标\n│   └── pom.xml\n├── exporter\n│   ├── pom.xml\n│   └── src\n├── microbench\t\t\t\t\t\t\t\t基准测试\n│   ├── pom.xml\n│   └── src\n├── oal-grammar\t\t\t\t\t\t\t\toal 相关\n│   ├── pom.xml\n│   └── src\n├── oal-rt\n│   ├── pom.xml\n│   └── src\n├── pom.xml\n├── server-alarm-plugin\t\t\t\t告警插件\n│   ├── pom.xml\n│   └── src\n├── server-cluster-plugin\t\t\t集群相关\n│   ├── cluster-consul-plugin\n│   ├── cluster-etcd-plugin\n│   ├── cluster-kubernetes-plugin\n│   ├── cluster-nacos-plugin\n│   ├── cluster-standalone-plugin\n│   ├── cluster-zookeeper-plugin\n│   └── pom.xml\n├── server-configuration\t\t\t动态配置相关\n│   ├── configuration-api\n│   ├── configuration-apollo\n│   ├── configuration-consul\n│   ├── configuration-etcd\n│   ├── configuration-k8s-configmap\n│   ├── configuration-nacos\n│   ├── configuration-zookeeper\n│   ├── grpc-configuration-sync\n│   └── pom.xml\n├── server-core\t\t\t\t\t\t\t\t核心模块\n│   ├── pom.xml\n│   └── src\n├── server-fetcher-plugin\t\t\t数据接收模块，可以从别的地方获取数据\n│   ├── kafka-fetcher-plugin\n│   ├── pom.xml\n│   └── prometheus-fetcher-plugin\n├── server-health-checker\t\t\t健康检查\n│   ├── pom.xml\n│   └── src\n├── server-library\t\t\t\t\t\t\n│   ├── library-client\t\t\t\t\t\t\t\t\t各种客户端\n│   ├── library-datacarrier-queue\t\t\t\t一个数据队列\n│   ├── library-elasticsearch-client\t\tes 客户端\n│   ├── library-module\t\t\t\t\t\t\t\t\tmodule 核心模块\n│   ├── library-server\t\t\t\t\t\t\t\t\tjetty 服务，grpc 服务\n│   ├── library-util\t\t\t\t\t\t\t\t\t\t各种工具类\n│   └── pom.xml\n├── server-query-plugin\n│   ├── pom.xml\n│   └── query-graphql-plugin\t\t\t\t\t\t前端 ui graphql查询接口\n├── server-receiver-plugin\t\t\t\t\t\t\t各种接收数据\n│   ├── configuration-discovery-receiver-plugin\n│   ├── envoy-metrics-receiver-plugin\n│   ├── otel-receiver-plugin\n│   ├── pom.xml\n│   ├── receiver-proto\n│   ├── skywalking-browser-receiver-plugin\n│   ├── skywalking-clr-receiver-plugin\n│   ├── skywalking-ebpf-receiver-plugin\n│   ├── skywalking-event-receiver-plugin\n│   ├── skywalking-jvm-receiver-plugin\n│   ├── skywalking-log-recevier-plugin\n│   ├── skywalking-management-receiver-plugin\n│   ├── skywalking-mesh-receiver-plugin\n│   ├── skywalking-meter-receiver-plugin\n│   ├── skywalking-profile-receiver-plugin\n│   ├── skywalking-sharing-server-plugin\n│   ├── skywalking-trace-receiver-plugin\n│   ├── skywalking-zabbix-receiver-plugin\n│   └── zipkin-receiver-plugin\n├── server-starter\t\t\t\t\t\t\t\t\t\t启动类\n│   ├── pom.xml\n│   └── src\n├── server-storage-plugin\t\t\t\t\t\t\t数据存储模块\n│   ├── pom.xml\n│   ├── storage-elasticsearch-plugin\n│   ├── storage-influxdb-plugin\n│   ├── storage-iotdb-plugin\n│   ├── storage-jdbc-hikaricp-plugin\n│   ├── storage-tidb-plugin\n│   └── storage-zipkin-elasticsearch-plugin\n├── server-telemetry\n│   ├── pom.xml\n│   ├── telemetry-api\n│   └── telemetry-prometheus\n├── server-testing\n│   ├── pom.xml\n│   ├── server-testing.iml\n│   └── src\n└── server-tools\n    ├── pom.xml\n    └── profile-exporter\n\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br"),s("span",{staticClass:"line-number"},[t._v("35")]),s("br"),s("span",{staticClass:"line-number"},[t._v("36")]),s("br"),s("span",{staticClass:"line-number"},[t._v("37")]),s("br"),s("span",{staticClass:"line-number"},[t._v("38")]),s("br"),s("span",{staticClass:"line-number"},[t._v("39")]),s("br"),s("span",{staticClass:"line-number"},[t._v("40")]),s("br"),s("span",{staticClass:"line-number"},[t._v("41")]),s("br"),s("span",{staticClass:"line-number"},[t._v("42")]),s("br"),s("span",{staticClass:"line-number"},[t._v("43")]),s("br"),s("span",{staticClass:"line-number"},[t._v("44")]),s("br"),s("span",{staticClass:"line-number"},[t._v("45")]),s("br"),s("span",{staticClass:"line-number"},[t._v("46")]),s("br"),s("span",{staticClass:"line-number"},[t._v("47")]),s("br"),s("span",{staticClass:"line-number"},[t._v("48")]),s("br"),s("span",{staticClass:"line-number"},[t._v("49")]),s("br"),s("span",{staticClass:"line-number"},[t._v("50")]),s("br"),s("span",{staticClass:"line-number"},[t._v("51")]),s("br"),s("span",{staticClass:"line-number"},[t._v("52")]),s("br"),s("span",{staticClass:"line-number"},[t._v("53")]),s("br"),s("span",{staticClass:"line-number"},[t._v("54")]),s("br"),s("span",{staticClass:"line-number"},[t._v("55")]),s("br"),s("span",{staticClass:"line-number"},[t._v("56")]),s("br"),s("span",{staticClass:"line-number"},[t._v("57")]),s("br"),s("span",{staticClass:"line-number"},[t._v("58")]),s("br"),s("span",{staticClass:"line-number"},[t._v("59")]),s("br"),s("span",{staticClass:"line-number"},[t._v("60")]),s("br"),s("span",{staticClass:"line-number"},[t._v("61")]),s("br"),s("span",{staticClass:"line-number"},[t._v("62")]),s("br"),s("span",{staticClass:"line-number"},[t._v("63")]),s("br"),s("span",{staticClass:"line-number"},[t._v("64")]),s("br"),s("span",{staticClass:"line-number"},[t._v("65")]),s("br"),s("span",{staticClass:"line-number"},[t._v("66")]),s("br"),s("span",{staticClass:"line-number"},[t._v("67")]),s("br"),s("span",{staticClass:"line-number"},[t._v("68")]),s("br"),s("span",{staticClass:"line-number"},[t._v("69")]),s("br"),s("span",{staticClass:"line-number"},[t._v("70")]),s("br"),s("span",{staticClass:"line-number"},[t._v("71")]),s("br"),s("span",{staticClass:"line-number"},[t._v("72")]),s("br"),s("span",{staticClass:"line-number"},[t._v("73")]),s("br"),s("span",{staticClass:"line-number"},[t._v("74")]),s("br"),s("span",{staticClass:"line-number"},[t._v("75")]),s("br"),s("span",{staticClass:"line-number"},[t._v("76")]),s("br"),s("span",{staticClass:"line-number"},[t._v("77")]),s("br"),s("span",{staticClass:"line-number"},[t._v("78")]),s("br"),s("span",{staticClass:"line-number"},[t._v("79")]),s("br"),s("span",{staticClass:"line-number"},[t._v("80")]),s("br"),s("span",{staticClass:"line-number"},[t._v("81")]),s("br"),s("span",{staticClass:"line-number"},[t._v("82")]),s("br"),s("span",{staticClass:"line-number"},[t._v("83")]),s("br"),s("span",{staticClass:"line-number"},[t._v("84")]),s("br"),s("span",{staticClass:"line-number"},[t._v("85")]),s("br"),s("span",{staticClass:"line-number"},[t._v("86")]),s("br"),s("span",{staticClass:"line-number"},[t._v("87")]),s("br"),s("span",{staticClass:"line-number"},[t._v("88")]),s("br"),s("span",{staticClass:"line-number"},[t._v("89")]),s("br"),s("span",{staticClass:"line-number"},[t._v("90")]),s("br"),s("span",{staticClass:"line-number"},[t._v("91")]),s("br"),s("span",{staticClass:"line-number"},[t._v("92")]),s("br"),s("span",{staticClass:"line-number"},[t._v("93")]),s("br"),s("span",{staticClass:"line-number"},[t._v("94")]),s("br"),s("span",{staticClass:"line-number"},[t._v("95")]),s("br"),s("span",{staticClass:"line-number"},[t._v("96")]),s("br"),s("span",{staticClass:"line-number"},[t._v("97")]),s("br"),s("span",{staticClass:"line-number"},[t._v("98")]),s("br"),s("span",{staticClass:"line-number"},[t._v("99")]),s("br"),s("span",{staticClass:"line-number"},[t._v("100")]),s("br"),s("span",{staticClass:"line-number"},[t._v("101")]),s("br"),s("span",{staticClass:"line-number"},[t._v("102")]),s("br"),s("span",{staticClass:"line-number"},[t._v("103")]),s("br"),s("span",{staticClass:"line-number"},[t._v("104")]),s("br"),s("span",{staticClass:"line-number"},[t._v("105")]),s("br")])]),s("h5",{attrs:{id:"主要类以及接口"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#主要类以及接口"}},[t._v("#")]),t._v(" 主要类以及接口")]),t._v(" "),s("ul",[s("li",[t._v("OAPServerStartUp：启动类")]),t._v(" "),s("li",[t._v("ApplicationConfigLoader：加载配置")]),t._v(" "),s("li",[t._v("ModuleManager：加载各种模块")]),t._v(" "),s("li",[t._v("ModuleProvider：提供服务类，主要通过 "),s("code",[t._v("prepare")]),t._v("，"),s("code",[t._v("start")]),t._v("，"),s("code",[t._v("notifyAfterCompleted")]),t._v("实现各种个功能")]),t._v(" "),s("li",[t._v("ModuleConfig：各种插件配置类")]),t._v(" "),s("li",[t._v("ISource：数据对象")]),t._v(" "),s("li",[t._v("GRPCHandlerRegister：GRPC 处理器注册")]),t._v(" "),s("li",[t._v("JettyHandlerRegister：jetty 处理器注册")])]),t._v(" "),s("h3",{attrs:{id:"java-agent"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#java-agent"}},[t._v("#")]),t._v(" Java agent")]),t._v(" "),s("blockquote",[s("p",[t._v("Java 客户端,搜集各种数据发送到服务端。")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/apache/skywalking-java",target:"_blank",rel:"noopener noreferrer"}},[t._v("apache/skywalking-java: The Java agent for Apache SkyWalking (github.com)"),s("OutboundLink")],1)])]),t._v(" "),s("h4",{attrs:{id:"目录结构-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#目录结构-2"}},[t._v("#")]),t._v(" 目录结构")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v(".\n├── apm-application-toolkit  \t\t\t\t一些工具类，仅仅是接口，具体实现在 apm-toolkit-activation 中\n├── apm-protocol\t\t\t\t\t\t\t\t\t\tProtocol协议定义了各种数据格式，以及通信格式等\n├── apm-sniffer\t\t\t\t\t\t\t\t\t\t\t核心代码\n│   ├── apm-agent\t\t\t\t\t\t\t\t\t\t插件入口\n│   ├── apm-agent-core\t\t\t\t\t\t\t核心代码\n│   ├── apm-sdk-plugin\t\t\t\t\t\t\t所有插件的父项目，以及大部分插件\n│   ├── apm-test-tools\t\t\t\t\t\t\t\n│   ├── apm-toolkit-activation\t\t\tapm-application-toolkit 的具体实现\n│   ├── bootstrap-plugins\n│   ├── config\n│   ├── optional-plugins\n│   ├── optional-reporter-plugins\n├── changes\t\t\t\t\t\t\t\t\t\t\t\t\t变更记录\n├── docs\t\t\t\t\t\t\t\t\t\t\t\t\t\t文档\n\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br")])]),s("h4",{attrs:{id:"流程图"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#流程图"}},[t._v("#")]),t._v(" 流程图")]),t._v(" "),s("iframe",{staticStyle:{display:"block",width:"725px",height:"245px"},attrs:{id:"embed_dom",name:"embed_dom",frameborder:"0",src:"https://www.processon.com/embed/621347b66376897c8c8308a3"}}),t._v(" "),s("h4",{attrs:{id:"主要类"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#主要类"}},[t._v("#")]),t._v(" 主要类")]),t._v(" "),s("ul",[s("li",[t._v("SkyWalkingAgent：启动类")]),t._v(" "),s("li",[t._v("Config：所有配置都在这个类中。")]),t._v(" "),s("li",[t._v("BootService：所有服务的顶级接口")]),t._v(" "),s("li",[t._v("TracingContext：核心类，主要用来创建 span")]),t._v(" "),s("li",[t._v("GlobalIdGenerator：生成 "),s("code",[t._v("traceId")]),t._v(" ，第一部分为"),s("code",[t._v("实例 id")]),t._v("，第二部分为"),s("code",[t._v("线程 id")]),t._v("，第三部分为时间戳（毫秒）+当前线程中的序列号[0,9999]")]),t._v(" "),s("li",[t._v("AbstractSpan：各种插件使用")])]),t._v(" "),s("h2",{attrs:{id:""}},[s("a",{staticClass:"header-anchor",attrs:{href:"#"}},[t._v("#")])])])}),[],!1,null,null,null);n.default=e.exports}}]);