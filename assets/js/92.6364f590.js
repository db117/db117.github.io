(window.webpackJsonp=window.webpackJsonp||[]).push([[92],{369:function(t,e,a){"use strict";a.r(e);var s=a(10),n=Object(s.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h2",{attrs:{id:"简介"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#简介"}},[t._v("#")]),t._v(" 简介")]),t._v(" "),e("blockquote",[e("p",[e("a",{attrs:{href:"https://prometheus.io/",target:"_blank",rel:"noopener noreferrer"}},[t._v("官网"),e("OutboundLink")],1)]),t._v(" "),e("p",[e("a",{attrs:{href:"https://github.com/prometheus",target:"_blank",rel:"noopener noreferrer"}},[t._v("Prometheus (github.com)"),e("OutboundLink")],1)]),t._v(" "),e("p",[t._v("基于时序数据库的开源监控告警系统")])]),t._v(" "),e("h2",{attrs:{id:"配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置"}},[t._v("#")]),t._v(" 配置")]),t._v(" "),e("blockquote",[e("p",[t._v("官方配置文档 "),e("a",{attrs:{href:"https://prometheus.io/docs/prometheus/latest/configuration/configuration/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Configuration | Prometheus"),e("OutboundLink")],1)]),t._v(" "),e("p",[t._v("下面记录一下经常修改的配置文件")])]),t._v(" "),e("h3",{attrs:{id:"通用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#通用"}},[t._v("#")]),t._v(" 通用")]),t._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("global:\n  # 抓取周期\n  [ scrape_interval: <duration> | default = 1m ]\n\n  # 超时时间\n  [ scrape_timeout: <duration> | default = 10s ]\n\n  # 评估报警规则周期\n  [ evaluation_interval: <duration> | default = 1m ]\n\n  # 记录 PromQL 查询的文件\n  # 重新加载配置将重新打开文件\n  [ query_log_file: <string> ]\n\n# 报警配置文件\nrule_files:\n  [ - <filepath_glob> ... ]\n\n# 抓取配置\nscrape_configs:\n  [ - <scrape_config> ... ]\n\n# 报警相关配置\nalerting:\n  alert_relabel_configs:\n    [ - <relabel_config> ... ]\n  alertmanagers:\n    [ - <alertmanager_config> ... ]\n\n# 抓取配置文件,主要用于抓取目标鉴权\nremote_read:\n  [ - <remote_read> ... ]\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br"),e("span",{staticClass:"line-number"},[t._v("12")]),e("br"),e("span",{staticClass:"line-number"},[t._v("13")]),e("br"),e("span",{staticClass:"line-number"},[t._v("14")]),e("br"),e("span",{staticClass:"line-number"},[t._v("15")]),e("br"),e("span",{staticClass:"line-number"},[t._v("16")]),e("br"),e("span",{staticClass:"line-number"},[t._v("17")]),e("br"),e("span",{staticClass:"line-number"},[t._v("18")]),e("br"),e("span",{staticClass:"line-number"},[t._v("19")]),e("br"),e("span",{staticClass:"line-number"},[t._v("20")]),e("br"),e("span",{staticClass:"line-number"},[t._v("21")]),e("br"),e("span",{staticClass:"line-number"},[t._v("22")]),e("br"),e("span",{staticClass:"line-number"},[t._v("23")]),e("br"),e("span",{staticClass:"line-number"},[t._v("24")]),e("br"),e("span",{staticClass:"line-number"},[t._v("25")]),e("br"),e("span",{staticClass:"line-number"},[t._v("26")]),e("br"),e("span",{staticClass:"line-number"},[t._v("27")]),e("br"),e("span",{staticClass:"line-number"},[t._v("28")]),e("br"),e("span",{staticClass:"line-number"},[t._v("29")]),e("br"),e("span",{staticClass:"line-number"},[t._v("30")]),e("br"),e("span",{staticClass:"line-number"},[t._v("31")]),e("br"),e("span",{staticClass:"line-number"},[t._v("32")]),e("br")])]),e("h4",{attrs:{id:"抓取配置-scrape-config"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#抓取配置-scrape-config"}},[t._v("#")]),t._v(" 抓取配置"),e("code",[t._v("<scrape_config>")])]),t._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("# 作业名称.\njob_name: <job_name>\n\n# 抓取周期,默认使用通用配置\n[ scrape_interval: <duration> | default = <global_config.scrape_interval> ]\n\n# 超时时间,默认使用通用配置\n[ scrape_timeout: <duration> | default = <global_config.scrape_timeout> ]\n\n# 从目标获取度量的 HTTP 资源路径\n[ metrics_path: <path> | default = /metrics ]\n\n# 配置用于请求的协议方案[https|http]\n[ scheme: <scheme> | default = http ]\n\n# 请求参数\nparams:\n  [ <string>: [<string>, ...] ]\n\n# 鉴权信息\nbasic_auth:\n  [ username: <string> ]\n  [ password: <secret> ]\n  [ password_file: <string> ]\n\n# 鉴权信息\nauthorization:\n  # 设置鉴权方式\n  [ type: <string> | default: Bearer ]\n  [ credentials: <secret> ]\n  [ credentials_file: <filename> ]\n\n# Optional OAuth 2.0 configuration.\n# Cannot be used at the same time as basic_auth or authorization.\noauth2:\n  [ <oauth2> ]\n\n# 是否从定向\n[ follow_redirects: <bool> | default = true ]\n\n# 代理地址\n[ proxy_url: <string> ]\n\n# 列出此作业的标记为静态配置的目标\nstatic_configs:\n  # 获取目标\n  targets:\n    [ - '<host>' ]\n\n  # label过滤\n  labels:\n    [ <labelname>: <labelvalue> ... ]\n\n# 修改标签\nrelabel_configs:\n  [ - <relabel_config> ... ]\n\n# List of metric relabel configurations.\nmetric_relabel_configs:\n  [ - <relabel_config> ... ]\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br"),e("span",{staticClass:"line-number"},[t._v("12")]),e("br"),e("span",{staticClass:"line-number"},[t._v("13")]),e("br"),e("span",{staticClass:"line-number"},[t._v("14")]),e("br"),e("span",{staticClass:"line-number"},[t._v("15")]),e("br"),e("span",{staticClass:"line-number"},[t._v("16")]),e("br"),e("span",{staticClass:"line-number"},[t._v("17")]),e("br"),e("span",{staticClass:"line-number"},[t._v("18")]),e("br"),e("span",{staticClass:"line-number"},[t._v("19")]),e("br"),e("span",{staticClass:"line-number"},[t._v("20")]),e("br"),e("span",{staticClass:"line-number"},[t._v("21")]),e("br"),e("span",{staticClass:"line-number"},[t._v("22")]),e("br"),e("span",{staticClass:"line-number"},[t._v("23")]),e("br"),e("span",{staticClass:"line-number"},[t._v("24")]),e("br"),e("span",{staticClass:"line-number"},[t._v("25")]),e("br"),e("span",{staticClass:"line-number"},[t._v("26")]),e("br"),e("span",{staticClass:"line-number"},[t._v("27")]),e("br"),e("span",{staticClass:"line-number"},[t._v("28")]),e("br"),e("span",{staticClass:"line-number"},[t._v("29")]),e("br"),e("span",{staticClass:"line-number"},[t._v("30")]),e("br"),e("span",{staticClass:"line-number"},[t._v("31")]),e("br"),e("span",{staticClass:"line-number"},[t._v("32")]),e("br"),e("span",{staticClass:"line-number"},[t._v("33")]),e("br"),e("span",{staticClass:"line-number"},[t._v("34")]),e("br"),e("span",{staticClass:"line-number"},[t._v("35")]),e("br"),e("span",{staticClass:"line-number"},[t._v("36")]),e("br"),e("span",{staticClass:"line-number"},[t._v("37")]),e("br"),e("span",{staticClass:"line-number"},[t._v("38")]),e("br"),e("span",{staticClass:"line-number"},[t._v("39")]),e("br"),e("span",{staticClass:"line-number"},[t._v("40")]),e("br"),e("span",{staticClass:"line-number"},[t._v("41")]),e("br"),e("span",{staticClass:"line-number"},[t._v("42")]),e("br"),e("span",{staticClass:"line-number"},[t._v("43")]),e("br"),e("span",{staticClass:"line-number"},[t._v("44")]),e("br"),e("span",{staticClass:"line-number"},[t._v("45")]),e("br"),e("span",{staticClass:"line-number"},[t._v("46")]),e("br"),e("span",{staticClass:"line-number"},[t._v("47")]),e("br"),e("span",{staticClass:"line-number"},[t._v("48")]),e("br"),e("span",{staticClass:"line-number"},[t._v("49")]),e("br"),e("span",{staticClass:"line-number"},[t._v("50")]),e("br"),e("span",{staticClass:"line-number"},[t._v("51")]),e("br"),e("span",{staticClass:"line-number"},[t._v("52")]),e("br"),e("span",{staticClass:"line-number"},[t._v("53")]),e("br"),e("span",{staticClass:"line-number"},[t._v("54")]),e("br"),e("span",{staticClass:"line-number"},[t._v("55")]),e("br"),e("span",{staticClass:"line-number"},[t._v("56")]),e("br"),e("span",{staticClass:"line-number"},[t._v("57")]),e("br"),e("span",{staticClass:"line-number"},[t._v("58")]),e("br"),e("span",{staticClass:"line-number"},[t._v("59")]),e("br"),e("span",{staticClass:"line-number"},[t._v("60")]),e("br")])]),e("h3",{attrs:{id:"rules"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#rules"}},[t._v("#")]),t._v(" rules")]),t._v(" "),e("blockquote",[e("p",[t._v("记录规则,可以预先计算经常需要或计算量大的表达式，并将其结果保存为一组新的时间序列")]),t._v(" "),e("p",[t._v("警报规则允许您基于 Prometheus 表达式语言表达式定义警报条件，并向外部服务发送有关发射警报的通知。每当警报表达式在给定时间点产生一个或多个向量元素时，警报对这些元素的标签集计为活动的。")])]),t._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('groups: #  分组\n  - name: example # 组名\n    rules:\n    - record: job:http_inprogress_requests:sum  # 记录规则名称\n      expr: sum by (job) (http_inprogress_requests)  # 规则\n      labels:  # 添加或覆盖标签\n  \t\t\t[ <labelname>: <labelvalue> ]\n  \t\t\t\n    - alert: HighRequestLatency # 报警规则名称\n      expr: job:request_latency_seconds:mean5m{job="myjob"} > 0.5 # 规则\n      for: 10m  # 持续时间\n      labels:   # 添加或覆盖标签\n        severity: page\n      annotations:\t# 描述信息,可以使用模板\n        summary: High request latency\n        # $value为当前记录数值\n        # $labels.instance 为名称为instance的labels\n        description: "{{ $labels.instance }}请求延迟的中位数大于1秒(当前值 {{ $value }}s)"\n')])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br"),e("span",{staticClass:"line-number"},[t._v("12")]),e("br"),e("span",{staticClass:"line-number"},[t._v("13")]),e("br"),e("span",{staticClass:"line-number"},[t._v("14")]),e("br"),e("span",{staticClass:"line-number"},[t._v("15")]),e("br"),e("span",{staticClass:"line-number"},[t._v("16")]),e("br"),e("span",{staticClass:"line-number"},[t._v("17")]),e("br"),e("span",{staticClass:"line-number"},[t._v("18")]),e("br")])]),e("h3",{attrs:{id:"模板"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#模板"}},[t._v("#")]),t._v(" 模板")]),t._v(" "),e("blockquote",[e("p",[t._v("Prometheus 模板语言是基于 Go 模板系统的")])]),t._v(" "),e("h4",{attrs:{id:"数据格式"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#数据格式"}},[t._v("#")]),t._v(" 数据格式")]),t._v(" "),e("blockquote",[e("p",[t._v("样本的度量名称保存在Labels中的"),e("code",[t._v("__name__")]),t._v("中")]),t._v(" "),e("p",[t._v("名称都以"),e("code",[t._v("_")]),t._v("进行分割")])]),t._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("type sample struct {\n        Labels map[string]string\n        Value  float64\n}\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br")])]),e("h4",{attrs:{id:"方法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#方法"}},[t._v("#")]),t._v(" 方法")]),t._v(" "),e("p",[t._v("查询")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("名称")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("参数")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("返回值")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("注释")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("query")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("query string")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("[]sample")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("查询数据库，不支持返回范围向量。")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("first")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("[]sample")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("sample")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("相当于数组第一个对象")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("label")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("label, sample")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("string")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("相当于 "),e("code",[t._v("index sample.Labels label")])])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("value")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("sample")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("float64")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("相当于"),e("code",[t._v("sample.Value")])])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("sortByLabel")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("label, []samples")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("[]sample")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("通过给定标签对样品进行排序。")])])])]),t._v(" "),e("p",[t._v("格式化数字")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("名称")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("参数")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("返回值")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("注释")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("humanize")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("number or string")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("string")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("使用公制前缀将数字转换为更易读的格式。")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("humanize1024")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("number or string")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("string")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("使用1024而不是1000的基础")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("humanizeDuration")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("number or string")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("string")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("将持续时间(秒)转换为更易读的格式。")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("humanizePercentage")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("number or string")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("string")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("转换为百分比")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("humanizeTimestamp")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("number or string")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("string")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("将 Unix 时间戳(秒)转换为更易读的格式。")])])])]),t._v(" "),e("h3",{attrs:{id:"字符串"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#字符串"}},[t._v("#")]),t._v(" 字符串")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("名称")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("参数")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("返回值")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("注释")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("title")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("string")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("string")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("a",{attrs:{href:"https://golang.org/pkg/strings/#Title",target:"_blank",rel:"noopener noreferrer"}},[t._v("strings.Title"),e("OutboundLink")],1),t._v(", 每个单词的首字母大写。")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("toUpper")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("string")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("string")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("a",{attrs:{href:"https://golang.org/pkg/strings/#ToUpper",target:"_blank",rel:"noopener noreferrer"}},[t._v("strings.ToUpper"),e("OutboundLink")],1),t._v(", 将所有字符转换为大写。")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("toLower")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("string")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("string")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("a",{attrs:{href:"https://golang.org/pkg/strings/#ToLower",target:"_blank",rel:"noopener noreferrer"}},[t._v("strings.ToLower"),e("OutboundLink")],1),t._v(", 将所有字符转换为小写。")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("match")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("pattern, text")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("boolean")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("a",{attrs:{href:"https://golang.org/pkg/regexp/#MatchString",target:"_blank",rel:"noopener noreferrer"}},[t._v("regexp.MatchString"),e("OutboundLink")],1),t._v(" regexp 匹配")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("reReplaceAll")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("pattern, replacement, text")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("string")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("a",{attrs:{href:"https://golang.org/pkg/regexp/#Regexp.ReplaceAllString",target:"_blank",rel:"noopener noreferrer"}},[t._v("Regexp.ReplaceAllString"),e("OutboundLink")],1),t._v(" 匹配替换")])])])]),t._v(" "),e("h4",{attrs:{id:"迭代"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#迭代"}},[t._v("#")]),t._v(" 迭代")]),t._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('# 查询up 并循环输出数值\n{{ range query "up" }}\n  {{ .Labels.instance }} {{ .Value }}\n{{ end }}\n')])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br")])]),e("h4",{attrs:{id:"管道"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#管道"}},[t._v("#")]),t._v(" 管道")]),t._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("# 查询第一个值并格式化\n{{ with query \"some_metric{instance='someinstance'}\" }}\n  {{ . | first | value | humanize }}\n{{ end }}\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br")])])])}),[],!1,null,null,null);e.default=n.exports}}]);