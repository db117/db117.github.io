(window.webpackJsonp=window.webpackJsonp||[]).push([[92],{464:function(a,s,e){"use strict";e.r(s);var i=e(28),n=Object(i.a)({},(function(){var a=this,s=a.$createElement,e=a._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h2",{attrs:{id:"在线安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#在线安装"}},[a._v("#")]),a._v(" 在线安装")]),a._v(" "),e("ul",[e("li",[a._v("用MySQL数据库安装存储库(数据库另装)\n"),e("ul",[e("li",[a._v("rpm -i http://repo.zabbix.com/zabbix/3.4/rhel/7/x86_64/zabbix-release-3.4-2.el7.noarch.rpm")])])]),a._v(" "),e("li",[a._v("安装ZabBix服务器，前端，代理\n"),e("ul",[e("li",[a._v("yum install zabbix-server-mysql zabbix-web-mysql zabbix-agent")])])]),a._v(" "),e("li",[a._v("创建初始数据库\n"),e("ul",[e("li",[a._v("mysql -uroot -p")]),a._v(" "),e("li",[a._v("password")]),a._v(" "),e("li",[a._v("mysql> create database zabbix character set utf8 collate utf8_bin;")]),a._v(" "),e("li",[a._v("mysql> grant all privileges on zabbix.* to zabbix@localhost identified by 'password';")]),a._v(" "),e("li",[a._v("mysql> quit;")])])]),a._v(" "),e("li",[a._v("导入初始模式和数据。将提示您输入新创建的密码。\n"),e("ul",[e("li",[a._v("zcat /usr/share/doc/zabbix-server-mysql*/create.sql.gz | mysql -uzabbix -p zabbix")])])]),a._v(" "),e("li",[a._v("为ZabBIX服务器配置数据库\n"),e("ul",[e("li",[a._v("编辑文件    vim /etc/zabbix/zabbix_server.conf\n"),e("ul",[e("li",[a._v("DBPassword=password")])])])])]),a._v(" "),e("li",[a._v("为ZabBIX前端配置PHP\n"),e("ul",[e("li",[a._v("编辑文件    vim /etc/httpd/conf.d/zabbix.conf\n"),e("ul",[e("li",[a._v("php_value date.timezone Asia/Shanghai")])])])])]),a._v(" "),e("li",[a._v("启动ZabBIX服务器和代理进程\n"),e("ul",[e("li",[a._v("systemctl restart zabbix-server zabbix-agent httpd")]),a._v(" "),e("li",[a._v("systemctl enable zabbix-server zabbix-agent httpd")])])]),a._v(" "),e("li",[a._v("然后就可以访问了ip/zabbix\n"),e("ul",[e("li",[a._v("默认帐号密码Admin/zabbix")])])])]),a._v(" "),e("h2",{attrs:{id:"修改为中文"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#修改为中文"}},[a._v("#")]),a._v(" 修改为中文")]),a._v(" "),e("ul",[e("li",[a._v("打开Zabbix界面，Administrator-Users 选择语言-Chinese(zh_CN)-update")]),a._v(" "),e("li",[a._v("解决乱码\n"),e("ul",[e("li",[e("p",[a._v("从Window服务器找到相应的字休复制到zabbix Server服务器上：")]),a._v(" "),e("p",[a._v("控制面板--\x3e字体--\x3e选择一种中文字库例如“楷体”（simkai.ttf）")])]),a._v(" "),e("li",[e("p",[a._v("将我们选择的字体文件上传到zabbix web服务，cd /usr/share/zabbix/fonts目录下（rpm安装目录）")])]),a._v(" "),e("li",[e("p",[a._v("修改此vim /usr/share/zabbix/include/defines.inc.php文件中字体的配置，\n将里面关于字体设置从graphfont替换成simkai")]),a._v(" "),e("ul",[e("li",[a._v("define('ZBX_GRAPH_FONT_NAME',           'simkai'); // font file name")])])])])])]),a._v(" "),e("h2",{attrs:{id:"关闭selinux"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#关闭selinux"}},[a._v("#")]),a._v(" 关闭selinux")]),a._v(" "),e("ul",[e("li",[a._v("vim /etc/selinux/config\n"),e("ul",[e("li",[a._v("SELINUX=disabled")])])]),a._v(" "),e("li",[a._v("setenforce 0")]),a._v(" "),e("li",[a._v("getenforce")])]),a._v(" "),e("h2",{attrs:{id:"docker搭建zabbix"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker搭建zabbix"}},[a._v("#")]),a._v(" docker搭建zabbix")]),a._v(" "),e("p",[a._v("本次使用docker搭建zabbix的组合是mysql+docker+zabix-server")]),a._v(" "),e("ul",[e("li",[a._v("先安装数据库mysql")])]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v('    docker run --name zabbix-mysql-server --hostname zabbix-mysql-server \\\n    -e MYSQL_ROOT_PASSWORD="123456" \\\n    -e MYSQL_USER="zabbix" \\\n    -e MYSQL_PASSWORD="123456" \\\n    -e MYSQL_DATABASE="zabbix" \\\n    -p 3306:3306 \\\n    -d mysql:5.7.22 \\\n    --character-set-server=utf8 --collation-server=utf8_bin\n')])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br"),e("span",{staticClass:"line-number"},[a._v("8")]),e("br")])]),e("ul",[e("li",[a._v("创建zabbix-server")])]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v('    docker run  --name zabbix-server-mysql --hostname zabbix-server-mysql \\\n    --link zabbix-mysql-server:mysql \\\n    -e DB_SERVER_HOST="mysql" \\\n    -e MYSQL_USER="zabbix" \\\n    -e MYSQL_DATABASE="zabbix" \\\n    -e MYSQL_PASSWORD="123456" \\\n    -v /etc/localtime:/etc/localtime:ro \\\n    -v /data/docker/zabbix/alertscripts:/usr/lib/zabbix/alertscripts \\\n    -v /data/docker/zabbix/externalscripts:/usr/lib/zabbix/externalscripts \\\n    -p 10051:10051 \\\n    -d zabbix/zabbix-server-mysql \\\n    \n')])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br"),e("span",{staticClass:"line-number"},[a._v("8")]),e("br"),e("span",{staticClass:"line-number"},[a._v("9")]),e("br"),e("span",{staticClass:"line-number"},[a._v("10")]),e("br"),e("span",{staticClass:"line-number"},[a._v("11")]),e("br"),e("span",{staticClass:"line-number"},[a._v("12")]),e("br")])]),e("ul",[e("li",[a._v("最后web-nginx")])]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v('    docker run --name zabbix-web-nginx-mysql --hostname zabbix-web-nginx-mysql \\\n    --link zabbix-mysql-server:mysql \\\n    --link zabbix-server-mysql:zabbix-server \\\n    -e DB_SERVER_HOST="mysql" \\\n    -e MYSQL_USER="zabbix" \\\n    -e MYSQL_PASSWORD="123456" \\\n    -e MYSQL_DATABASE="zabbix" \\\n    -e ZBX_SERVER_HOST="zabbix-server" \\\n    -e PHP_TZ="Asia/Shanghai" \\\n    -p 8000:80 \\\n    -p 8443:443 \\\n    -d \\\n    zabbix/zabbix-web-nginx-mysql\n')])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br"),e("span",{staticClass:"line-number"},[a._v("8")]),e("br"),e("span",{staticClass:"line-number"},[a._v("9")]),e("br"),e("span",{staticClass:"line-number"},[a._v("10")]),e("br"),e("span",{staticClass:"line-number"},[a._v("11")]),e("br"),e("span",{staticClass:"line-number"},[a._v("12")]),e("br"),e("span",{staticClass:"line-number"},[a._v("13")]),e("br")])]),e("ul",[e("li",[a._v("登录访问测试")])]),a._v(" "),e("p",[a._v("浏览器访问ip:8000查看\n默认登录\nusername:Admin\npassword:zabbix\n这里说明下，mysql没做数据卷的映射，nginx也没做数据卷的映射，在实际生产环境下，最好做数据映射。防止数据丢失。")]),a._v(" "),e("ul",[e("li",[a._v("docker-zabbbix-agent的安装以及链接zabbix-server")])]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("docker run --name zabbix-agent --link zabbix-server-mysql:zabbix-server -d zabbix/zabbix-agent:latest\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),a._v('" -e ZBX_SERVER_HOST="192.168.1.109" -e ZBX_SERVER_PORT=10051 -d zabbix/zabbix-agent:3.2.5 line-numbers-mode">'),e("pre",{pre:!0,attrs:{class:"language-docker"}},[e("code")]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"}),e("p",[a._v("最后需要在web端将，zabbix-agent添加到zabbix-server的host列表里面。")])])}),[],!1,null,null,null);s.default=n.exports}}]);