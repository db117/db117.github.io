(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{410:function(a,e,s){"use strict";s.r(e);var t=s(27),n=Object(t.a)({},(function(){var a=this,e=a.$createElement,s=a._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("iframe",{staticStyle:{display:"block",width:"725px",height:"245px"},attrs:{id:"embed_dom",name:"embed_dom",frameborder:"0",src:"https://www.processon.com/embed/60e5834f6376892c1ec611af"}}),a._v(" "),s("h2",{attrs:{id:"list"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#list"}},[a._v("#")]),a._v(" List")]),a._v(" "),s("h3",{attrs:{id:"arraylist"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#arraylist"}},[a._v("#")]),a._v(" ArrayList")]),a._v(" "),s("blockquote",[s("p",[s("code",[a._v("java.util.ArrayList")])]),a._v(" "),s("p",[a._v("最常用的集合,实现方式为数组")])]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("public class ArrayList<E> extends AbstractList<E>\n        implements List<E>, RandomAccess, Cloneable, java.io.Serializable\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("ul",[s("li",[s("p",[a._v("使用"),s("code",[a._v("transient Object[] elementData;")]),a._v("来保存数据,默认大小为10")])]),a._v(" "),s("li",[s("p",[a._v("每一次扩容为之前的1.5倍"),s("code",[a._v("int newCapacity = oldCapacity + (oldCapacity >> 1);")])])]),a._v(" "),s("li",[s("p",[a._v("标记为java.util.RandomAccess,可进行随机访问")])]),a._v(" "),s("li",[s("p",[a._v("删除元素需要调用 "),s("code",[a._v("System.arraycopy()")]),a._v(" 将 index+1 后面的元素都复制到 index 位置上，该操作的时间复杂度为 O(N)")])]),a._v(" "),s("li",[s("p",[a._v("subList")]),a._v(" "),s("blockquote",[s("p",[a._v("访问时通过从定向index来实现,添加修改会改变原来的List")])])]),a._v(" "),s("li",[s("p",[s("code",[a._v("java.util.Arrays.ArrayList")]),a._v("为"),s("code",[a._v("Arrays")]),a._v("的实现,不能add,remove.但是可以get,set")])])]),a._v(" "),s("h3",{attrs:{id:"linkedlist"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#linkedlist"}},[a._v("#")]),a._v(" LinkedList")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("public class LinkedList<E>\n    extends AbstractSequentialList<E>\n    implements List<E>, Deque<E>, Cloneable, java.io.Serializable\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br")])]),s("blockquote",[s("p",[s("code",[a._v("java.util.LinkedList")])]),a._v(" "),s("p",[a._v("相比ArrayList多实现了java.util.Deque接口")]),a._v(" "),s("p",[a._v("使用双向链表来保存数据")])]),a._v(" "),s("h3",{attrs:{id:"vector-线程安全"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vector-线程安全"}},[a._v("#")]),a._v(" Vector(线程安全)")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("public class Vector<E>\n    extends AbstractList<E>\n    implements List<E>, RandomAccess, Cloneable, java.io.Serializable\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br")])]),s("blockquote",[s("p",[s("code",[a._v("java.util.Vector")])]),a._v(" "),s("p",[a._v("跟java.util.ArrayList类似,不过接口通过synchronized来保证并发安全")])]),a._v(" "),s("ul",[s("li",[a._v("扩容直接翻倍")])]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("// 容量满了后,如果设置了capacityIncrement这按照设置的数量进行增加,否则翻倍\nint newCapacity = oldCapacity + ((capacityIncrement > 0) ?\n                                 capacityIncrement : oldCapacity);\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br")])]),s("h3",{attrs:{id:"stack-线程安全"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#stack-线程安全"}},[a._v("#")]),a._v(" Stack(线程安全)")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("public class Stack<E> extends Vector<E> \n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("blockquote",[s("p",[s("code",[a._v("java.util.Stack")])]),a._v(" "),s("p",[a._v("直接继承自"),s("code",[a._v("java.util.Vector")])]),a._v(" "),s("p",[a._v("实现stack数据结构")])]),a._v(" "),s("h3",{attrs:{id:"copyonwritearraylist-线程安全"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#copyonwritearraylist-线程安全"}},[a._v("#")]),a._v(" CopyOnWriteArrayList(线程安全)")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("public class CopyOnWriteArrayList<E>\n    implements List<E>, RandomAccess, Cloneable, java.io.Serializable \n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("blockquote",[s("p",[s("code",[a._v("java.util.concurrent.CopyOnWriteArrayList")])])]),a._v(" "),s("ul",[s("li",[a._v("和ArrayList一样，其底层数据结构也是数组，加上transient不让其被序列化，加上volatile修饰来保证多线程下的其可见性和有序性")]),a._v(" "),s("li",[a._v("CopyOnWriteArrayList适合于多线程场景下使用，其采用读写分离的思想，读操作不上锁，写操作上锁，且写操作效率较低")]),a._v(" "),s("li",[a._v("CopyOnWriteArrayList基于fail-safe机制，每次修改都会在原先基础上复制一份，修改完毕后在进行替换")]),a._v(" "),s("li",[a._v("CopyOnWriteArrayList在1.8中采用的是ReentrantLock进行上锁。jdk11中采用的是synchronized进行加锁")]),a._v(" "),s("li",[s("strong",[a._v("不能保证实时一致性")]),a._v("，只能保证最终一致性")])]),a._v(" "),s("h2",{attrs:{id:"map"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#map"}},[a._v("#")]),a._v(" map")]),a._v(" "),s("h3",{attrs:{id:"hashmap"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#hashmap"}},[a._v("#")]),a._v(" HashMap")]),a._v(" "),s("blockquote",[s("p",[a._v("最常用的map,使用拉链发解决 hash 冲突")]),a._v(" "),s("p",[a._v("在 1.8 后链表长度过长会转换为红黑树")])]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("public class HashMap<K,V> extends AbstractMap<K,V>\n    implements Map<K,V>, Cloneable, Serializable \n    \n   \n static final int DEFAULT_INITIAL_CAPACITY = 1 << 4;// 默认容量\n static final float DEFAULT_LOAD_FACTOR = 0.75f;// 扩容阈值\n static final int TREEIFY_THRESHOLD = 8;// 链表改红黑树阈值\n static final int UNTREEIFY_THRESHOLD = 6;// 红黑树改链表阈值\n \n transient Node<K,V>[] table;// 存数据的数组\n transient int size;// map的数量\n transient int modCount;// 线程不安全是.快速失败\n \n static class Node<K,V> implements Map.Entry<K,V> {\n        final int hash;//对key的hashcode值进行hash运算后得到的值，存储在Entry，避免重复计算\n        final K key;\n        V value;\n        Node<K,V> next;//存储指向下一个Entry的引用，单链表结构\n }\n \n // 高低位异或,减小冲突\n static final int hash(Object key) {\n        int h;\n        return (key == null) ? 0 : (h = key.hashCode()) ^ (h >>> 16);\n}\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br"),s("span",{staticClass:"line-number"},[a._v("15")]),s("br"),s("span",{staticClass:"line-number"},[a._v("16")]),s("br"),s("span",{staticClass:"line-number"},[a._v("17")]),s("br"),s("span",{staticClass:"line-number"},[a._v("18")]),s("br"),s("span",{staticClass:"line-number"},[a._v("19")]),s("br"),s("span",{staticClass:"line-number"},[a._v("20")]),s("br"),s("span",{staticClass:"line-number"},[a._v("21")]),s("br"),s("span",{staticClass:"line-number"},[a._v("22")]),s("br"),s("span",{staticClass:"line-number"},[a._v("23")]),s("br"),s("span",{staticClass:"line-number"},[a._v("24")]),s("br"),s("span",{staticClass:"line-number"},[a._v("25")]),s("br")])]),s("h3",{attrs:{id:"treemap"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#treemap"}},[a._v("#")]),a._v(" TreeMap")]),a._v(" "),s("blockquote",[s("p",[a._v("TreeMap的实现是红黑树算法的实现")]),a._v(" "),s("p",[a._v("为有序map")])]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("public class TreeMap<K,V>\n    extends AbstractMap<K,V>\n    implements NavigableMap<K,V>, Cloneable, java.io.Serializable\n    \n    // 重要属性\n    // 比较器，因为TreeMap是有序的\n    private final Comparator<? super K> comparator;\n    //TreeMap红-黑节点，为TreeMap的内部类\n    private transient Entry<K,V> root = null;\n    //容器大小\n    private transient int size = 0;\n    //TreeMap修改次数\n    private transient int modCount = 0;\n    //红黑树的节点颜色--红色\n    private static final boolean RED = false;\n    //红黑树的节点颜色--黑色\n    private static final boolean BLACK = true;\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br"),s("span",{staticClass:"line-number"},[a._v("15")]),s("br"),s("span",{staticClass:"line-number"},[a._v("16")]),s("br"),s("span",{staticClass:"line-number"},[a._v("17")]),s("br")])]),s("h3",{attrs:{id:"hashtable-线程安全"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#hashtable-线程安全"}},[a._v("#")]),a._v(" Hashtable(线程安全)")]),a._v(" "),s("blockquote",[s("p",[a._v("很古老的线程安全的map")]),a._v(" "),s("p",[a._v("可以简单粗暴的理解为对 hashmap 的修改方法加锁")]),a._v(" "),s("p",[a._v("推荐使用 "),s("code",[a._v("java.util.concurrent.ConcurrentHashMap")])])]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("public class Hashtable<K,V>\n    extends Dictionary<K,V>\n    implements Map<K,V>, Cloneable, java.io.Serializable\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br")])]),s("h3",{attrs:{id:"identityhashmap"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#identityhashmap"}},[a._v("#")]),a._v(" IdentityHashMap")]),a._v(" "),s("blockquote",[s("p",[s("code",[a._v("Hashmap")]),a._v(" 使用 equals 来比较是否相等,而"),s("code",[a._v("IdentityHashMap")]),a._v("使用 ==")]),a._v(" "),s("p",[s("strong",[a._v("不是Map的通用实现")]),a._v("，它有意违反了Map的常规协定。并且IdentityHashMap允许key和value都为null")])]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("public class IdentityHashMap<K,V>\n    extends AbstractMap<K,V>\n    implements Map<K,V>, java.io.Serializable, Cloneable\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br")])]),s("h3",{attrs:{id:"linkedhashmap"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#linkedhashmap"}},[a._v("#")]),a._v(" LinkedHashMap")]),a._v(" "),s("blockquote",[s("p",[a._v("继承自"),s("code",[a._v("HashMap")]),a._v(",添加双向链表来保证迭代循序")]),a._v(" "),s("p",[a._v("通过重写 newNode 和 newTreeNode 来说实现添加数据放入队尾")]),a._v(" "),s("p",[a._v("可扩展实现 LRU 缓存")])]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("public class LinkedHashMap<K,V>\n    extends HashMap<K,V>\n    implements Map<K,V>\n    \n    // 双端列表头\n    transient LinkedHashMap.Entry<K,V> head;\n\n    // 双端列表尾\n    transient LinkedHashMap.Entry<K,V> tail;\n\n\t\t// 链表顺序：{@code true}表示访问顺序，{@code false}表示插入顺序。\n    final boolean accessOrder;\n\t\t\n\t\t// 扩展方法,可以实现 LRU 缓存\n\t\t// 返回 true 就会在插入数据的时候删除最老的 node\n    protected boolean removeEldestEntry(Map.Entry<K,V> eldest) {\n        return false;\n    }\n\n\t\t// 对 hashmap 中下面三个方法进行重写\n    // Callbacks to allow LinkedHashMap post-actions\n    // accessOrder 为 true 时访问数据时会把  node 移动到链表尾部\n    void afterNodeAccess(Node<K,V> p) { }\n    // 符合条件会删除最老的 node\n    void afterNodeInsertion(boolean evict) { }\n    // 把 node 移动到队列尾部\n    void afterNodeRemoval(Node<K,V> p) { }\n\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br"),s("span",{staticClass:"line-number"},[a._v("15")]),s("br"),s("span",{staticClass:"line-number"},[a._v("16")]),s("br"),s("span",{staticClass:"line-number"},[a._v("17")]),s("br"),s("span",{staticClass:"line-number"},[a._v("18")]),s("br"),s("span",{staticClass:"line-number"},[a._v("19")]),s("br"),s("span",{staticClass:"line-number"},[a._v("20")]),s("br"),s("span",{staticClass:"line-number"},[a._v("21")]),s("br"),s("span",{staticClass:"line-number"},[a._v("22")]),s("br"),s("span",{staticClass:"line-number"},[a._v("23")]),s("br"),s("span",{staticClass:"line-number"},[a._v("24")]),s("br"),s("span",{staticClass:"line-number"},[a._v("25")]),s("br"),s("span",{staticClass:"line-number"},[a._v("26")]),s("br"),s("span",{staticClass:"line-number"},[a._v("27")]),s("br"),s("span",{staticClass:"line-number"},[a._v("28")]),s("br")])]),s("h3",{attrs:{id:"weakhashmap"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#weakhashmap"}},[a._v("#")]),a._v(" WeakHashMap")]),a._v(" "),s("blockquote",[s("p",[a._v("主要是用在内存敏感的系统中,当缓存使用")])]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("public class WeakHashMap<K,V>\n    extends AbstractMap<K,V>\n    implements Map<K,V> \n    \n    // 准备被 gc 掉的key放入到队列中\n    private final ReferenceQueue<Object> queue = new ReferenceQueue<>();\n    \n    // 每一次操作时删除掉在队列中的 key\n    private void expungeStaleEntries() {}\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br")])]),s("h3",{attrs:{id:"enummap"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#enummap"}},[a._v("#")]),a._v(" EnumMap")]),a._v(" "),s("blockquote",[s("p",[a._v("key 必须为"),s("code",[a._v("Eunm")]),a._v("的map")])]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("public class EnumMap<K extends Enum<K>, V> extends AbstractMap<K, V>\n    implements java.io.Serializable, Cloneable\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("h3",{attrs:{id:"concurrenthashmap-线程安全"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#concurrenthashmap-线程安全"}},[a._v("#")]),a._v(" ConcurrentHashMap(线程安全)")]),a._v(" "),s("blockquote",[s("p",[a._v("最常用的线程安全map，主要结构跟 "),s("code",[a._v("hashmap")]),a._v("差不多。")]),a._v(" "),s("p",[a._v("synchronized 只锁定当前链表或红⿊⼆叉树的⾸节点，这样只要 hash 不冲突，就不会产⽣并发，效率⼜提升 N 倍。")])]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("public class ConcurrentHashMap<K,V> extends AbstractMap<K,V>\n    implements ConcurrentMap<K,V>, Serializable \n    \n// node数组最大容量：2^30=1073741824\nprivate static final int MAXIMUM_CAPACITY = 1 << 30;\n// 默认初始值，必须是2的幕数\nprivate static final int DEFAULT_CAPACITY = 16\n//数组可能最大值，需要与toArray（）相关方法关联\nstatic final int MAX_ARRAY_SIZE = Integer.MAX_VALUE - 8;\n//并发级别，遗留下来的，为兼容以前的版本 在序列话时使用\nprivate static final int DEFAULT_CONCURRENCY_LEVEL = 16;\nprivate static final float LOAD_FACTOR = 0.75f;// 负载因子\nstatic final int TREEIFY_THRESHOLD = 8;// 链表转红黑树阀值,> 8 链表转换为红黑树\n//树转链表阀值，小于等于6（tranfer时，lc、hc=0两个计数器分别++记录原bin、新binTreeNode数量，<=UNTREEIFY_THRESHOLD 则untreeify(lo)）\nstatic final int UNTREEIFY_THRESHOLD = 6;\n// 需要转换红黑树的最小阈值 \nstatic final int MIN_TREEIFY_CAPACITY = 64;\n// 2^15-1，help resize的最大线程数\nprivate static final int MAX_RESIZERS = (1 << (32 - RESIZE_STAMP_BITS)) - 1;\n// 32-16=16，sizeCtl中记录size大小的偏移量\nprivate static final int RESIZE_STAMP_SHIFT = 32 - RESIZE_STAMP_BITS\ntransient volatile Node<K,V>[] table;//存放node的数组\nprivate transient volatile Node<K,V>[] nextTable;// 仅仅在扩容是非空\n/*控制标识符，用来控制table的初始化和扩容的操作，不同的值有不同的含义\n *当为负数时：-1代表正在初始化，-N代表有N-1个线程正在 进行扩容\n *当为0时：代表当时的table还没有被初始化\n *当为正数时：表示初始化或者下一次进行扩容的大小\nprivate transient volatile int sizeCtl;\n\n// 当当前操作节点正在扩容时辅助扩容\nfinal Node<K,V>[] helpTransfer(Node<K,V>[] tab, Node<K,V> f) {}\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br"),s("span",{staticClass:"line-number"},[a._v("15")]),s("br"),s("span",{staticClass:"line-number"},[a._v("16")]),s("br"),s("span",{staticClass:"line-number"},[a._v("17")]),s("br"),s("span",{staticClass:"line-number"},[a._v("18")]),s("br"),s("span",{staticClass:"line-number"},[a._v("19")]),s("br"),s("span",{staticClass:"line-number"},[a._v("20")]),s("br"),s("span",{staticClass:"line-number"},[a._v("21")]),s("br"),s("span",{staticClass:"line-number"},[a._v("22")]),s("br"),s("span",{staticClass:"line-number"},[a._v("23")]),s("br"),s("span",{staticClass:"line-number"},[a._v("24")]),s("br"),s("span",{staticClass:"line-number"},[a._v("25")]),s("br"),s("span",{staticClass:"line-number"},[a._v("26")]),s("br"),s("span",{staticClass:"line-number"},[a._v("27")]),s("br"),s("span",{staticClass:"line-number"},[a._v("28")]),s("br"),s("span",{staticClass:"line-number"},[a._v("29")]),s("br"),s("span",{staticClass:"line-number"},[a._v("30")]),s("br"),s("span",{staticClass:"line-number"},[a._v("31")]),s("br")])]),s("ul",[s("li",[a._v("使用"),s("code",[a._v("synchronized")]),a._v("锁住链表头或红黑树根节点")]),a._v(" "),s("li",[a._v("key 和 value 都不容许为 null")]),a._v(" "),s("li",[a._v("Nod节点中value和next都用volatile修饰，保证并发的可见性")])]),a._v(" "),s("h3",{attrs:{id:"concurrentskiplistmap-线程安全"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#concurrentskiplistmap-线程安全"}},[a._v("#")]),a._v(" ConcurrentSkipListMap(线程安全)")]),a._v(" "),s("blockquote",[s("p",[a._v("提供了一种线程安全的并发访问的排序映射表。内部是SkipList（跳表）结构实现，在理论上能够O(log(n))时间内完成查找、插入、删除操作。")])]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("public class ConcurrentSkipListMap<K,V> extends AbstractMap<K,V>\n    implements ConcurrentNavigableMap<K,V>, Cloneable, Serializable\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("h2",{attrs:{id:"set"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#set"}},[a._v("#")]),a._v(" set")]),a._v(" "),s("h3",{attrs:{id:"hashset"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#hashset"}},[a._v("#")]),a._v(" HashSet")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("public class HashSet<E>\n    extends AbstractSet<E>\n    implements Set<E>, Cloneable, java.io.Serializable\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br")])]),s("h3",{attrs:{id:"treeset"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#treeset"}},[a._v("#")]),a._v(" TreeSet")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("public class TreeSet<E> extends AbstractSet<E>\n    implements NavigableSet<E>, Cloneable, java.io.Serializable\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("h3",{attrs:{id:"linkedhashset"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#linkedhashset"}},[a._v("#")]),a._v(" LinkedHashSet")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("public class LinkedHashSet<E>\n    extends HashSet<E>\n    implements Set<E>, Cloneable, java.io.Serializable \n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br")])]),s("h3",{attrs:{id:"concurrentskiplistset-线程安全"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#concurrentskiplistset-线程安全"}},[a._v("#")]),a._v(" ConcurrentSkipListSet(线程安全)")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("public class ConcurrentSkipListSet<E>\n    extends AbstractSet<E>\n    implements NavigableSet<E>, Cloneable, java.io.Serializable\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br")])]),s("h3",{attrs:{id:"copyonwritearrayset-线程安全"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#copyonwritearrayset-线程安全"}},[a._v("#")]),a._v(" CopyOnWriteArraySet(线程安全)")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("public class CopyOnWriteArraySet<E> extends AbstractSet<E>\n        implements java.io.Serializable\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("h2",{attrs:{id:"qeque"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#qeque"}},[a._v("#")]),a._v(" Qeque")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("public interface Queue<E> extends Collection<E> \n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h3",{attrs:{id:"priorityqueue"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#priorityqueue"}},[a._v("#")]),a._v(" PriorityQueue")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("public class PriorityQueue<E> extends AbstractQueue<E>\n    implements java.io.Serializable {\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("h3",{attrs:{id:"synchronousqueue-线程安全"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#synchronousqueue-线程安全"}},[a._v("#")]),a._v(" SynchronousQueue（线程安全）")]),a._v(" "),s("blockquote",[s("p",[a._v("其内部是没有容器的，所以生产者生产一个数据，就堵塞了，必须等消费者消费后，生产者才能再次生产。")])]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("public class SynchronousQueue<E> extends AbstractQueue<E>\n    implements BlockingQueue<E>, java.io.Serializable {\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("h3",{attrs:{id:"linkedblockingqueue-线程安全"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#linkedblockingqueue-线程安全"}},[a._v("#")]),a._v(" LinkedBlockingQueue（线程安全）")]),a._v(" "),s("ul",[s("li",[a._v("基于链表实现")]),a._v(" "),s("li",[a._v("大小可以初始化设置，如果不设置，默认设置大小为Integer.MAX_VALUE")]),a._v(" "),s("li",[a._v("有两个锁对象，可以并行处理")])]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("public class LinkedBlockingQueue<E> extends AbstractQueue<E>\n        implements BlockingQueue<E>, java.io.Serializable {\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("h3",{attrs:{id:"arrayblockingqueue-线程安全"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#arrayblockingqueue-线程安全"}},[a._v("#")]),a._v(" ArrayBlockingQueue（线程安全）")]),a._v(" "),s("ul",[s("li",[a._v("基于数组实现")]),a._v(" "),s("li",[a._v("初始化时设置数组长度")]),a._v(" "),s("li",[a._v("是一个有界队列")]),a._v(" "),s("li",[a._v("只有一个锁对象")])]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("public class ArrayBlockingQueue<E> extends AbstractQueue<E>\n        implements BlockingQueue<E>, java.io.Serializable {\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("h3",{attrs:{id:"linkedtransferqueue-线程安全"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#linkedtransferqueue-线程安全"}},[a._v("#")]),a._v(" LinkedTransferQueue（线程安全）")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("public class LinkedTransferQueue<E> extends AbstractQueue<E>\n    implements TransferQueue<E>, java.io.Serializable {\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("h3",{attrs:{id:"priorityblockingqueue-线程安全"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#priorityblockingqueue-线程安全"}},[a._v("#")]),a._v(" PriorityBlockingQueue（线程安全）")]),a._v(" "),s("ul",[s("li",[a._v("基于优先级的一个无界队列")]),a._v(" "),s("li",[a._v("底层是基于数组存储元素的")]),a._v(" "),s("li",[a._v("元素按照优选级顺序存储，优先级是通过Comparable的compareTo方法来实现的（自然排序")]),a._v(" "),s("li",[a._v("其只会堵塞消费者，不会堵塞生产者，数组会不断扩容，这就是一个彩蛋，使用时要谨慎。")])]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("public class PriorityBlockingQueue<E> extends AbstractQueue<E>\n    implements BlockingQueue<E>, java.io.Serializable {\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("h3",{attrs:{id:"delayqueue-线程安全"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#delayqueue-线程安全"}},[a._v("#")]),a._v(" DelayQueue（线程安全）")]),a._v(" "),s("ul",[s("li",[a._v("基于优先级的一个无界队列")]),a._v(" "),s("li",[a._v("队列元素必须实现Delayed接口")]),a._v(" "),s("li",[a._v("支持延迟获取")]),a._v(" "),s("li",[a._v("元素按照时间排序")]),a._v(" "),s("li",[a._v("只有元素到期后，消费者才能从队列中取出")])]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("public class DelayQueue<E extends Delayed> extends AbstractQueue<E>\n    implements BlockingQueue<E> {\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("h3",{attrs:{id:"concurrentlinkedqueue-线程安全"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#concurrentlinkedqueue-线程安全"}},[a._v("#")]),a._v(" ConcurrentLinkedQueue（线程安全）")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("public class ConcurrentLinkedQueue<E> extends AbstractQueue<E>\n        implements Queue<E>, java.io.Serializable {\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("h2",{attrs:{id:"deque"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#deque"}},[a._v("#")]),a._v(" Deque")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("public interface Deque<E> extends Queue<E>\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h3",{attrs:{id:"arraydeque"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#arraydeque"}},[a._v("#")]),a._v(" ArrayDeque")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("public class ArrayDeque<E> extends AbstractCollection<E>\n                           implements Deque<E>, Cloneable, Serializable\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("h3",{attrs:{id:"concurrentlinkeddeque-线程安全"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#concurrentlinkeddeque-线程安全"}},[a._v("#")]),a._v(" ConcurrentLinkedDeque（线程安全）")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("public class ConcurrentLinkedDeque<E>\n    extends AbstractCollection<E>\n    implements Deque<E>, java.io.Serializable {\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br")])]),s("h3",{attrs:{id:"linkedblockingdeque-线程安全"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#linkedblockingdeque-线程安全"}},[a._v("#")]),a._v(" LinkedBlockingDeque（线程安全）")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("public class LinkedBlockingDeque<E>\n    extends AbstractQueue<E>\n    implements BlockingDeque<E>, java.io.Serializable {\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br")])])])}),[],!1,null,null,null);e.default=n.exports}}]);