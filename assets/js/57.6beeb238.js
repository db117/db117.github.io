(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{418:function(a,s,t){"use strict";t.r(s);var e=t(26),v=Object(e.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h3",{attrs:{id:"内存瓶颈"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#内存瓶颈"}},[a._v("#")]),a._v(" "),t("strong",[a._v("内存瓶颈")])]),a._v(" "),t("h4",{attrs:{id:"free"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#free"}},[a._v("#")]),a._v(" free")]),a._v(" "),t("p",[t("code",[a._v("free")]),a._v("是查看内存使用情况，包括物理内存、交换内存(swap)和内核缓冲区内存。")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("-b "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 以Byte为单位显示内存使用情况；")]),a._v("\n-k "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 以KB为单位显示内存使用情况；")]),a._v("\n-m "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 以MB为单位显示内存使用情况；")]),a._v("\n-g "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 以GB为单位显示内存使用情况。 ")]),a._v("\n-o "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 不显示缓冲区调节列；")]),a._v("\n-s"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("间隔秒数"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 持续观察内存使用状况；")]),a._v("\n-t "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 显示内存总和列；")]),a._v("\n-V "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 显示版本信息。")]),a._v("\n")])])]),t("h5",{attrs:{id:"实例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#实例"}},[a._v("#")]),a._v(" 实例")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("free -h -s 3 \t#\t每隔三秒输出一次内存情况\nfree -t    \t\t# 以总和的形式显示内存的使用信息\nfree -s 10 \t\t# 周期性的查询内存使用信息，每10s 执行一次命令\n")])])]),t("ul",[t("li",[t("code",[a._v("Mem")]),a._v("：是内存的使用情况。")]),a._v(" "),t("li",[t("code",[a._v("Swap")]),a._v("：是交换空间的使用情况。")]),a._v(" "),t("li",[t("code",[a._v("total")]),a._v("：系统总的可用物理内存和交换空间大小。")]),a._v(" "),t("li",[t("code",[a._v("used")]),a._v("：已经被使用的物理内存和交换空间。")]),a._v(" "),t("li",[t("code",[a._v("free")]),a._v("：还有多少物理内存和交换空间可用使用，是真正尚未被使用的物理内存数量。")]),a._v(" "),t("li",[t("code",[a._v("shared")]),a._v("：被共享使用的物理内存大小。")]),a._v(" "),t("li",[t("code",[a._v("buff/cache")]),a._v("：被 buffer（缓冲区） 和 cache（缓存） 使用的物理内存大小。")]),a._v(" "),t("li",[t("code",[a._v("available")]),a._v("：还可以被应用程序使用的物理内存大小，它是从应用程序的角度看到的可用内存数量，available ≈ free + buffer + cache。")])]),a._v(" "),t("h4",{attrs:{id:"vmstat"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#vmstat"}},[a._v("#")]),a._v(" vmstat")]),a._v(" "),t("blockquote",[t("p",[a._v("vmstat（VirtualMeomoryStatistics，虚拟内存统计）是Linux中监控内存的常用工具，可对操作系统的虚拟内存、进程、CPU等的整体情况进行监视，推荐使用。")])]),a._v(" "),t("h5",{attrs:{id:"选项"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#选项"}},[a._v("#")]),a._v(" 选项")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("-a：显示活动内页；\n-f：显示启动后创建的进程总数；\n-m：显示slab信息；\n-n：头信息仅显示一次；\n-s：以表格方式显示事件计数器和内存状态；\n-d：报告磁盘状态；\n-p：显示指定的硬盘分区状态；\n-S：输出信息的单位。\n")])])]),t("h5",{attrs:{id:"参数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参数"}},[a._v("#")]),a._v(" 参数")]),a._v(" "),t("ul",[t("li",[a._v("事件间隔：状态信息刷新的时间间隔；")]),a._v(" "),t("li",[a._v("次数：显示报告的次数。")])]),a._v(" "),t("h5",{attrs:{id:"实例-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#实例-2"}},[a._v("#")]),a._v(" 实例")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("vmstat 5 3\t\t\t\t#\t表示每隔5秒统计一次，一共统计三次。\n")])])]),t("h5",{attrs:{id:"字段说明"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#字段说明"}},[a._v("#")]),a._v(" 字段说明")]),a._v(" "),t("ul",[t("li",[a._v("procs")])]),a._v(" "),t("blockquote",[t("p",[t("code",[a._v("r")]),a._v("：表示运行和等待CPU时间片的进程数（就是说多少个进程真的分配到CPU），这个值如果长期大于系统CPU个数，说明CPU不足，需要增加CPU。\n"),t("code",[a._v("b")]),a._v("：表示在等待资源的进程数，比如正在等待I/O或者内存交换等。")])]),a._v(" "),t("ul",[t("li",[a._v("memory")])]),a._v(" "),t("blockquote",[t("p",[t("code",[a._v("swpd")]),a._v("：表示切换到内存交换区的内存大小，即虚拟内存已使用的大小（单位KB），如果大于0，表示你的机器物理内存不足了，如果不是程序内存泄露的原因，那么你该升级内存了或者把耗内存的任务迁移到其他机器。")]),a._v(" "),t("p",[t("code",[a._v("free")]),a._v("：表示当前空闲的物理内存。")]),a._v(" "),t("p",[t("code",[a._v("buff")]),a._v("：表示缓冲大小，一般对块设备的读写才需要缓冲")]),a._v(" "),t("p",[t("code",[a._v("Cache")]),a._v("：表示缓存大小，一般作为文件系统进行缓冲，频繁访问的文件都会被缓存，如果cache值非常大说明缓存文件比较多，如果此时io中的bi比较小，说明文件系统效率比较好。")])]),a._v(" "),t("ul",[t("li",[a._v("swap")])]),a._v(" "),t("blockquote",[t("p",[t("code",[a._v("si")]),a._v("：表示数据由磁盘读入内存；通俗的讲就是每秒从磁盘读入虚拟内存的大小，如果这个值大于0，表示物理内存不够用或者内存泄露了，要查找耗内存进程解决掉。")]),a._v(" "),t("p",[t("code",[a._v("so")]),a._v("：表示由内存写入磁盘，也就是由内存交换区进入内存的数据大小。")])]),a._v(" "),t("blockquote",[t("p",[t("strong",[a._v("!!")]),a._v(" 注意：一般情况下si、so的值都为0，如果si、so的值长期不为0，则说明系统内存不足，需要增加系统内存")])]),a._v(" "),t("ul",[t("li",[a._v("io")])]),a._v(" "),t("blockquote",[t("p",[t("code",[a._v("bi")]),a._v("：表示由块设备读入数据的总量，即读磁盘，单位kb/s")]),a._v(" "),t("p",[t("code",[a._v("bo")]),a._v("：表示写到块设备数据的总量，即写磁盘，单位kb/s")])]),a._v(" "),t("ul",[t("li",[a._v("system")])]),a._v(" "),t("blockquote",[t("p",[t("code",[a._v("in")]),a._v("：表示某一时间间隔内观测到的每秒设备终端数。")]),a._v(" "),t("p",[t("code",[a._v("cs")]),a._v("：表示每秒产生的上下文切换次数，这个值要越小越好，太大了，要考虑调低线程或者进程的数目。例如在apache和nginx这种web服务器中，我们一般做性能测试时会进行几千并发甚至几万并发的测试，选择web服务器的进程可以由进程或者线程的峰值一直下调，压测，直到cs到一个比较小的值，这个进程和线程数就是比较合适的值了。系统调用也是，每次调用系统函数，我们的代码就会进入内核空间，导致上下文切换，这个是很耗资源，也要尽量避免频繁调用系统函数。上下文切换次数过多表示你的CPU大部分浪费在上下文切换，导致CPU干正经事的时间少了，CPU没有充分利用，是不可取的。")])]),a._v(" "),t("blockquote",[t("p",[t("strong",[a._v("!!")]),a._v(" 注意：这两个值越大，则由内核消耗的CPU就越多。")])]),a._v(" "),t("ul",[t("li",[a._v("CPU")])]),a._v(" "),t("blockquote",[t("p",[t("code",[a._v("us")]),a._v("：表示用户进程消耗的CPU时间百分比，us值越高，说明用户进程消耗CPU时间越多，如果长期大于50%，则需要考虑优化程序或者算法。")]),a._v(" "),t("p",[t("code",[a._v("sy")]),a._v("：表示系统内核进程消耗的CPU时间百分比，一般来说us+sy应该小于80%，如果大于80%，说明可能存在CPU瓶颈。")]),a._v(" "),t("p",[t("code",[a._v("id")]),a._v("：表示CPU处在空间状态的时间百分比。")]),a._v(" "),t("p",[t("code",[a._v("wa")]),a._v("：表示IP等待所占用的CPU时间百分比，wa值越高，说明I/O等待越严重，根据经验wa的参考值为20%，如果超过20%，说明I/O等待严重，引起I/O等待的原因可能是磁盘大量随机读写造成的，也可能是磁盘或者监控器的贷款瓶颈（主要是块操作）造成的。")])]),a._v(" "),t("h4",{attrs:{id:"sar"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sar"}},[a._v("#")]),a._v(" sar")]),a._v(" "),t("blockquote",[t("p",[a._v("系统运行状态统计工具")]),a._v(" "),t("p",[a._v("是Linux下系统运行状态统计工具，它将指定的操作系统状态计数器显示到标准输出设备。sar工具将对系统当前的状态进行取样，然后通过计算数据和比例来表达系统的当前运行状态。它的特点是可以连续对系统取样，获得大量的取样数据。取样数据和分析的结果都可以存入文件，使用它时消耗的系统资源很小。")])]),a._v(" "),t("h5",{attrs:{id:"语法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#语法"}},[a._v("#")]),a._v(" 语法")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("sar"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("选项"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("参数"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n")])])]),t("h5",{attrs:{id:"选项-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#选项-2"}},[a._v("#")]),a._v(" 选项")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("-A：显示所有的报告信息；\n-b：显示I/O速率；\n-B：显示换页状态；\n-c：显示进程创建活动；\n-d：显示每个块设备的状态；\n-e：设置显示报告的结束时间；\n-f：从指定文件提取报告；\n-i：设状态信息刷新的间隔时间；\n-P：报告每个CPU的状态；\n-r：显示内存状态；\n-u：显示CPU利用率；\n-v：显示索引节点，文件和其他内核表的状态；\n-w：显示交换分区状态；\n-x：显示给定进程的状态\n")])])]),t("h5",{attrs:{id:"参数-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参数-2"}},[a._v("#")]),a._v(" 参数")]),a._v(" "),t("ul",[t("li",[a._v("间隔时间：每次报告的间隔时间（秒）；")]),a._v(" "),t("li",[a._v("次数：显示报告的次数。")])]),a._v(" "),t("h5",{attrs:{id:"实例-3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#实例-3"}},[a._v("#")]),a._v(" 实例")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("sar -r 3\t\t#\t每隔三秒输出一次内存信息\nsar 60 10\t\t# 观察系统部件10分钟，并对数据进行排序\nsar -ur 5 3 # 每隔5秒打印cpu,内存信息 打印3次\n")])])]),t("h3",{attrs:{id:"cpu瓶颈"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cpu瓶颈"}},[a._v("#")]),a._v(" CPU瓶颈")]),a._v(" "),t("h3",{attrs:{id:"cpu信息"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cpu信息"}},[a._v("#")]),a._v(" CPU信息")]),a._v(" "),t("blockquote",[t("p",[a._v("查看所有信息")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("cat /proc/cpuinfo\n")])])]),t("h5",{attrs:{id:"查看cpu信息-型号"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看cpu信息-型号"}},[a._v("#")]),a._v(" 查看CPU信息（型号）")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("cat /proc/cpuinfo | grep name | cut -f2 -d: | uniq -c\n")])])]),t("h5",{attrs:{id:"查看物理cpu个数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看物理cpu个数"}},[a._v("#")]),a._v(" 查看物理CPU个数")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v('cat /proc/cpuinfo| grep "physical id"| sort| uniq| wc -l\n16\n')])])]),t("h5",{attrs:{id:"查看每个物理cpu中core的个数-即核数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看每个物理cpu中core的个数-即核数"}},[a._v("#")]),a._v(" 查看每个物理CPU中core的个数(即核数)")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v('cat /proc/cpuinfo| grep "cpu cores"| uniq\n')])])]),t("h5",{attrs:{id:"查看逻辑cpu的个数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看逻辑cpu的个数"}},[a._v("#")]),a._v(" 查看逻辑CPU的个数")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v('cat /proc/cpuinfo| grep "processor"| wc -l\n')])])]),t("h4",{attrs:{id:"top"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#top"}},[a._v("#")]),a._v(" top")]),a._v(" "),t("blockquote",[t("p",[a._v("在Linux内核的操作系统中，进程是根据虚拟运行时间（由进程优先级、nice值加上实际占用的CPU时间进行动态计算得出）进行动态调度的。在执行进程时，需要从用户态转换到内核态，用户空间不能直接操作内核空间的函数。通常要利用系统调用来完成进程调度，而用户空间到内核空间的转换通常是通过软中断来完成的。例如要进行磁盘操作，用户态需要通过系统调用内核的磁盘操作指令，所以CPU消耗的时间被切分成用户态CPU消耗、系统（内核） CPU 消耗，以及磁盘操作 CPU 消耗。执行进程时，需要经过一系列的操作，进程首先在用户态执行，在执行过程中会进行进程优先级的调整（nice），通过系统调用到内核，再通过内核调用，硬中断、软中断，让硬件执行任务。执行完成之后，再从内核态返回给系统调用，最后系统调用将结果返回给用户态的进程。")])]),a._v(" "),t("blockquote",[t("p",[a._v("top可以查看CPU总体消耗，包括分项消耗，如User，System，Idle，nice等。"),t("code",[a._v("Shift + H")]),a._v("显示java线程；"),t("code",[a._v("Shift + M")]),a._v("按照内存使用排序；"),t("code",[a._v("Shift + P")]),a._v("按照CPU使用时间（使用率）排序；"),t("code",[a._v("Shift + T")]),a._v("按照CPU累积使用时间排序；多核CPU，进入top视图"),t("code",[a._v("1")]),a._v("，可以看到各各CPU的负载情况。")])]),a._v(" "),t("h4",{attrs:{id:"选项-3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#选项-3"}},[a._v("#")]),a._v(" 选项")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("-b：以批处理模式操作；\n-c：显示完整的治命令；\n-d：屏幕刷新间隔时间；\n-I：忽略失效过程；\n-s：保密模式；\n-S：累积模式；\n-i"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("时间"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("：设置间隔时间；\n-u"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("用户名"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("：指定用户名；\n-p"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("进程号"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("：指定进程；\n-n"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("次数"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("：循环显示的次数。\n")])])]),t("h4",{attrs:{id:"top交互命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#top交互命令"}},[a._v("#")]),a._v(" top交互命令")]),a._v(" "),t("blockquote",[t("p",[a._v("在top命令执行过程中可以使用的一些交互命令。这些命令都是单字母的，如果在命令行中使用了-s选项， 其中一些命令可能会被屏蔽。")])]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("h：显示帮助画面，给出一些简短的命令总结说明；\nk：终止一个进程；\ni：忽略闲置和僵死进程，这是一个开关式命令；\nq：退出程序；\nr：重新安排一个进程的优先级别；\nS：切换到累计模式；\ns：改变两次刷新之间的延迟时间（单位为s），如果有小数，就换算成ms。输入0值则系统将不断刷新，默认值是5s；\nf或者F：从当前显示中添加或者删除项目；\no或者O：改变显示项目的顺序；\nl：切换显示平均负载和启动时间信息；\nm：切换显示内存信息；\nt：切换显示进程和CPU状态信息；\nc：切换显示命令名称和完整命令行；\nM：根据驻留内存大小进行排序；\nP：根据CPU使用百分比大小进行排序；\nT：根据时间/累计时间进行排序；\nw：将当前设置写入~/.toprc文件中。\n")])])]),t("h5",{attrs:{id:"实例-4"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#实例-4"}},[a._v("#")]),a._v(" 实例")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("top \n15:24:11 up 8 days,  7:52,  1 user,  load average: 5.73, 6.85, 7.33\nTasks:  17 total,   1 running,  16 sleeping,   0 stopped,   0 zombie\n%Cpu(s): 13.9 us,  9.2 sy,  0.0 ni, 76.1 id,  0.1 wa,  0.0 hi,  0.1 si,  0.7 st\nKiB Mem : 11962365+total, 50086832 free, 38312808 used, 31224016 buff/cache\nKiB Swap:        0 total,        0 free,        0 used. 75402760 avail Mem\n\n   PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND\n     1 root      20   0   15376   1988   1392 S   0.0  0.0   0:00.06 sh\n")])])]),t("ul",[t("li",[a._v("第一行")])]),a._v(" "),t("blockquote",[t("p",[a._v("系统时间")]),a._v(" "),t("p",[a._v("up[运行时间 ]")]),a._v(" "),t("p",[a._v("user[ 当前登录用户数]")]),a._v(" "),t("p",[a._v("load average[负载均衡情况，分别表示1分钟，5分钟，15分钟负载情况]")])]),a._v(" "),t("ul",[t("li",[a._v("第二行")])]),a._v(" "),t("blockquote",[t("p",[a._v("total[总进程数]")]),a._v(" "),t("p",[a._v("running [运行数]")]),a._v(" "),t("p",[a._v("sleeping[休眠 ]")]),a._v(" "),t("p",[a._v("stopped [停止]")]),a._v(" "),t("p",[a._v("zombie[僵尸进程]")])]),a._v(" "),t("ul",[t("li",[a._v("第三行")])]),a._v(" "),t("blockquote",[t("p",[a._v("us[用户空间CPU占比]")]),a._v(" "),t("p",[a._v("sy[内核空间CPU占比]")]),a._v(" "),t("p",[a._v("ni[改变过优先级的进程CPU占比]")]),a._v(" "),t("p",[a._v("id[空闲CPU占比]")]),a._v(" "),t("p",[a._v("wa[IO等待占用CPU占比]")]),a._v(" "),t("p",[a._v("hi [硬中断占用CPU占比]")]),a._v(" "),t("p",[a._v("si [ 软中断占用CPU占比0.1%,]")]),a._v(" "),t("p",[a._v("st[当前VM中的cpu 时钟被虚拟化偷走的比例]")])]),a._v(" "),t("ul",[t("li",[a._v("第四行")])]),a._v(" "),t("blockquote",[t("p",[a._v("total[物理内存总量]")]),a._v(" "),t("p",[a._v("free[空闲内存总量]")]),a._v(" "),t("p",[a._v("used[使用的物理内存总量]")]),a._v(" "),t("p",[a._v("buff/cache[用作内核缓存的内存量]")])]),a._v(" "),t("ul",[t("li",[a._v("第五行")])]),a._v(" "),t("blockquote",[t("p",[a._v("total[交换区总量]")]),a._v(" "),t("p",[a._v("used[使用的交换区总量]")]),a._v(" "),t("p",[a._v("free[空闲交换区总量]")]),a._v(" "),t("p",[a._v("cached[缓冲的交换区总量]")])]),a._v(" "),t("p",[a._v("第七行表示：")]),a._v(" "),t("ul",[t("li",[t("code",[a._v("PID")]),a._v(": 进程id")]),a._v(" "),t("li",[t("code",[a._v("USER")]),a._v(":进程所有者")]),a._v(" "),t("li",[t("code",[a._v("PR")]),a._v(":进程优先级")]),a._v(" "),t("li",[t("code",[a._v("NI")]),a._v(":nice值。负值表示高优先级，正值表示低优先级")]),a._v(" "),t("li",[t("code",[a._v("VIRT")]),a._v(":虚拟内存，进程使用的虚拟内存总量，单位kb。VIRT=SWAP+RES")]),a._v(" "),t("li",[t("code",[a._v("RES")]),a._v(":常驻内存，进程使用的、未被换出的物理内存大小，单位kb。RES=CODE+DATA")]),a._v(" "),t("li",[t("code",[a._v("SHR")]),a._v(":共享内存，共享内存大小，单位kb")]),a._v(" "),t("li",[t("code",[a._v("S")]),a._v(":进程状态。D=不可中断的睡眠状态 R=运行 S=睡眠 T=跟踪/停止 Z=僵尸进程")]),a._v(" "),t("li",[t("code",[a._v("%CPU")]),a._v(":上次更新到现在的CPU时间占用百分比")]),a._v(" "),t("li",[t("code",[a._v("%MEM")]),a._v(":进程使用的物理内存百分比")]),a._v(" "),t("li",[t("code",[a._v("TIME+")]),a._v(":进程使用的CPU时间总计，单位1/100秒")]),a._v(" "),t("li",[t("code",[a._v("COMMAND")]),a._v(":进程名称（命令名/命令行）")])]),a._v(" "),t("h3",{attrs:{id:"网络瓶颈"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#网络瓶颈"}},[a._v("#")]),a._v(" 网络瓶颈")]),a._v(" "),t("h4",{attrs:{id:"查看路由经过的地址"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看路由经过的地址"}},[a._v("#")]),a._v(" 查看路由经过的地址")]),a._v(" "),t("blockquote",[t("p",[t("code",[a._v("traceroute ip")]),a._v("可以查看路由经过的地址，常用来统计网络在各个路由区段的耗时，如：")])]),a._v(" "),t("h4",{attrs:{id:"netstat"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#netstat"}},[a._v("#")]),a._v(" netstat")]),a._v(" "),t("blockquote",[t("p",[a._v("用来打印Linux中网络系统的状态信息，可让你得知整个Linux系统的网络情况")])]),a._v(" "),t("h3",{attrs:{id:"选项-4"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#选项-4"}},[a._v("#")]),a._v(" 选项")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("-a或--all：显示所有连线中的Socket；\n-A"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("网络类型"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("或--"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("网络类型"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("：列出该网络类型连线中的相关地址；\n-c或--continuous：持续列出网络状态；\n-C或--cache：显示路由器配置的快取信息；\n-e或--extend：显示网络其他相关信息；\n-F或--fib：显示FIB；\n-g或--groups：显示多重广播功能群组组员名单；\n-h或--help：在线帮助；\n-i或--interfaces：显示网络界面信息表单；\n-l或--listening：显示监控中的服务器的Socket；\n-M或--masquerade：显示伪装的网络连线；\n-n或--numeric：直接使用ip地址，而不通过域名服务器；\n-N或--netlink或--symbolic：显示网络硬件外围设备的符号连接名称；\n-o或--timers：显示计时器；\n-p或--programs：显示正在使用Socket的程序识别码和程序名称；\n-r或--route：显示Routing Table；\n-s或--statistice：显示网络工作信息统计表；\n-t或--tcp：显示TCP传输协议的连线状况；\n-u或--udp：显示UDP传输协议的连线状况；\n-v或--verbose：显示指令执行过程；\n-V或--version：显示版本信息；\n-w或--raw：显示RAW传输协议的连线状况；\n-x或--unix：此参数的效果和指定"),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"-A unix"')]),a._v("参数相同；\n--ip或--inet：此参数的效果和指定"),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"-A inet"')]),a._v("参数相同。\n")])])]),t("h4",{attrs:{id:"实例-5"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#实例-5"}},[a._v("#")]),a._v(" 实例")]),a._v(" "),t("blockquote",[t("p",[a._v("列出所有端口 (包括监听和未监听的)")])]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("netstat")]),a._v(" -a     "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#列出所有端口")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("netstat")]),a._v(" -at    "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#列出所有tcp端口")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("netstat")]),a._v(" -au    "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#列出所有udp端口                             ")]),a._v("\n")])])]),t("blockquote",[t("p",[a._v("列出所有处于监听状态的 Sockets")])]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("netstat")]),a._v(" -l        "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#只显示监听端口")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("netstat")]),a._v(" -lt       "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#只列出所有监听 tcp 端口")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("netstat")]),a._v(" -lu       "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#只列出所有监听 udp 端口")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("netstat")]),a._v(" -lx       "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#只列出所有监听 UNIX 端口")]),a._v("\n")])])]),t("blockquote",[t("p",[a._v("显示每个协议的统计信息")])]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("netstat")]),a._v(" -s   显示所有端口的统计信息\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("netstat")]),a._v(" -st   显示TCP端口的统计信息\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("netstat")]),a._v(" -su   显示UDP端口的统计信息\n")])])]),t("blockquote",[t("p",[a._v("在netstat输出中显示 PID 和进程名称")])]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("netstat")]),a._v(" -pt\n")])])]),t("blockquote",[t("p",[a._v("持续输出netstat信息")])]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("netstat")]),a._v(" -c   "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#每隔一秒输出网络信息")]),a._v("\n")])])]),t("blockquote",[t("p",[a._v("*显示系统不支持的地址族(Address Families)")])]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("netstat")]),a._v(" --verbose\n\nnetstat: no support "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")]),a._v("AF IPX' on this system.\nnetstat: no support "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")])]),a._v("AF AX25"),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("' on this system.\nnetstat: no support for "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")]),a._v("AF X25' on this system.\nnetstat: no support "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")])]),a._v("AF NETROM'")]),a._v(" on this system.\n")])])]),t("blockquote",[t("p",[a._v("显示核心路由信息")])]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("netstat")]),a._v(" -r\n")])])]),t("blockquote",[t("p",[t("strong",[a._v("找出程序运行的端口")])])]),a._v(" "),t("p",[a._v("并不是所有的进程都能找到，没有权限的会不显示，使用 root 权限查看所有的信息。")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("netstat")]),a._v(" -ap "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("grep")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("ssh")]),a._v("\n")])])]),t("blockquote",[t("p",[a._v("找出运行在指定端口的进程")])]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("netstat")]),a._v(" -an "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("grep")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("':80'")]),a._v("\n")])])]),t("blockquote",[t("p",[a._v("显示网络")])]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("netstat")]),a._v(" -ie\n")])])]),t("h5",{attrs:{id:"查看网络错误"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看网络错误"}},[a._v("#")]),a._v(" 查看网络错误")]),a._v(" "),t("p",[t("code",[a._v("netstat -i")]),a._v("可以查看网络错误：")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("$ netstat -i\nKernel Interface table\nIface             MTU    RX-OK RX-ERR RX-DRP RX-OVR    TX-OK TX-ERR TX-DRP TX-OVR Flg\nens33            1500   570291      0      0 0        225897      0      0      0 BMRU\nlo              65536      130      0      0 0           130      0      0      0 LRU\n")])])]),t("ul",[t("li",[t("code",[a._v("Iface")]),a._v(": 网络接口名称;")]),a._v(" "),t("li",[t("code",[a._v("MTU")]),a._v(": 最大传输单元，它限制了数据帧的最大长度，不同的网络类型都有一个上限值，如：以太网的MTU是1500；")]),a._v(" "),t("li",[t("code",[a._v("RX-OK")]),a._v("：接收时，正确的数据包数。")]),a._v(" "),t("li",[t("code",[a._v("RX-ERR")]),a._v("：接收时，产生错误的数据包数。")]),a._v(" "),t("li",[t("code",[a._v("RX-DRP")]),a._v("：接收时，丢弃的数据包数。")]),a._v(" "),t("li",[t("code",[a._v("RX-OVR")]),a._v("：接收时，由于过速（在数据传输中，由于接收设备不能接收按照发送速率传送来的数据而使数据丢失）而丢失的数据包数。")]),a._v(" "),t("li",[t("code",[a._v("TX-OK")]),a._v("：发送时，正确的数据包数。")]),a._v(" "),t("li",[t("code",[a._v("TX-ERR")]),a._v("：发送时，产生错误的数据包数。")]),a._v(" "),t("li",[t("code",[a._v("TX-DRP")]),a._v("：发送时，丢弃的数据包数。")]),a._v(" "),t("li",[t("code",[a._v("TX-OVR")]),a._v("：发送时，由于过速而丢失的数据包数。")]),a._v(" "),t("li",[t("code",[a._v("Flg")]),a._v("：标志，B 已经设置了一个广播地址。L 该接口是一个回送设备。M 接收所有数据包（混乱模式）。N 避免跟踪。O 在该接口上，禁用ARP。P 这是一个点到点链接。R 接口正在运行。U 接口处于“活动”状态。")])]),a._v(" "),t("h3",{attrs:{id:"磁盘瓶颈"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#磁盘瓶颈"}},[a._v("#")]),a._v(" 磁盘瓶颈")]),a._v(" "),t("h4",{attrs:{id:"df"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#df"}},[a._v("#")]),a._v(" df")]),a._v(" "),t("blockquote",[t("p",[a._v("用于显示磁盘分区上的可使用的磁盘空间。默认显示单位为KB。可以利用该命令来获取硬盘被占用了多少空间，目前还剩下多少空间等信息")])]),a._v(" "),t("h5",{attrs:{id:"选项-5"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#选项-5"}},[a._v("#")]),a._v(" 选项")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("-a或--all：包含全部的文件系统；\n--block-size"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("区块大小"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("：以指定的区块大小来显示区块数目；\n-h或--human-readable：以可读性较高的方式来显示信息；\n-H或--si：与-h参数相同，但在计算时是以1000 Bytes为换算单位而非1024 Bytes；\n-i或--inodes：显示inode的信息；\n-k或--kilobytes：指定区块大小为1024字节；\n-l或--local：仅显示本地端的文件系统；\n-m或--megabytes：指定区块大小为1048576字节；\n--no-sync：在取得磁盘使用信息前，不要执行sync指令，此为预设值；\n-P或--portability：使用POSIX的输出格式；\n--sync：在取得磁盘使用信息前，先执行sync指令；\n-t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("文件系统类型"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("或--type"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("文件系统类型"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("：仅显示指定文件系统类型的磁盘信息；\n-T或--print-type：显示文件系统的类型；\n-x"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("文件系统类型"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("或--exclude-type"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("文件系统类型"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("：不要显示指定文件系统类型的磁盘信息；\n--help：显示帮助；\n--version：显示版本信息。\n")])])]),t("h5",{attrs:{id:"参数-3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参数-3"}},[a._v("#")]),a._v(" 参数")]),a._v(" "),t("blockquote",[t("p",[a._v("文件：指定文件系统上的文件。")])]),a._v(" "),t("h5",{attrs:{id:"大小格式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#大小格式"}},[a._v("#")]),a._v(" 大小格式")]),a._v(" "),t("blockquote",[t("p",[a._v("显示值以 "),t("code",[a._v("--block-size")]),a._v(" 和 "),t("code",[a._v("DF_BLOCK_SIZE")]),a._v("，"),t("code",[a._v("BLOCK_SIZE")]),a._v(" 和 "),t("code",[a._v("BLOCKSIZE")]),a._v(" 环境变量中的第一个可用 "),t("code",[a._v("SIZE")]),a._v(" 为单位。 否则，单位默认为 "),t("code",[a._v("1024")]),a._v(" 个字节（如果设置 "),t("code",[a._v("POSIXLY_CORRECT")]),a._v("，则为"),t("code",[a._v("512")]),a._v("）。")])]),a._v(" "),t("blockquote",[t("p",[a._v("SIZE是一个整数和可选单位（例如：10M是10 * 1024 * 1024）。 单位是K，M，G，T，P，E，Z，Y（1024的幂）或KB，MB，...（1000的幂）。")])]),a._v(" "),t("h5",{attrs:{id:"实例-6"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#实例-6"}},[a._v("#")]),a._v(" 实例")]),a._v(" "),t("blockquote",[t("p",[a._v("使用"),t("code",[a._v("-h")]),a._v("选项以KB以上的单位来显示，可读性高：")])]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("df")]),a._v(" -h\n")])])]),t("blockquote",[t("p",[a._v("查看全部文件系统")])]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("df")]),a._v(" -a\n\n")])])]),t("blockquote",[t("p",[a._v("显示 "),t("code",[a._v("public")]),a._v(" 目录中的可用空间量，如以下输出中所示：")])]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("df")]),a._v(" public\n")])])]),t("blockquote",[t("p",[a._v("查看磁盘剩余空间使用")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("df -hl\n")])])]),t("h4",{attrs:{id:"du"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#du"}},[a._v("#")]),a._v(" du")]),a._v(" "),t("blockquote",[t("p",[a._v("也是查看使用空间的，但是与df命令不同的是Linux du命令是对文件和目录磁盘使用的空间的查看，还是和df命令有一些区别的")])]),a._v(" "),t("h5",{attrs:{id:"选项-6"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#选项-6"}},[a._v("#")]),a._v(" 选项")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("-a或-all 显示目录中个别文件的大小。\n-b或-bytes 显示目录或文件大小时，以byte为单位。\n-c或--total 除了显示个别目录或文件的大小外，同时也显示所有目录或文件的总和。\n-k或--kilobytes 以KB"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("1024bytes"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("为单位输出。\n-m或--megabytes 以MB为单位输出。\n-s或--summarize 仅显示总计，只列出最后加总的值。\n-h或--human-readable 以K，M，G为单位，提高信息的可读性。\n-x或--one-file-xystem 以一开始处理时的文件系统为准，若遇上其它不同的文件系统目录则略过。\n-L"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("符号链接"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("或--dereference"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("符号链接"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" 显示选项中所指定符号链接的源文件大小。\n-S或--separate-dirs 显示个别目录的大小时，并不含其子目录的大小。\n-X"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("文件"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("或--exclude-from"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("文件"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" 在"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("文件"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("指定目录或文件。\n--exclude"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("目录或文件"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" 略过指定的目录或文件。\n-D或--dereference-args 显示指定符号链接的源文件大小。\n-H或--si 与-h参数相同，但是K，M，G是以1000为换算单位。\n-l或--count-links 重复计算硬件链接的文件。\n")])])]),t("h5",{attrs:{id:"实例-7"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#实例-7"}},[a._v("#")]),a._v(" 实例")]),a._v(" "),t("blockquote",[t("p",[a._v("只显示当前目录下面的子目录的目录大小和当前目录的总的大小，最下面的为当前目录的总大小")])]),a._v(" "),t("blockquote",[t("p",[a._v("显示指定文件所占空间：")])]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("du")]),a._v(" log.log\n")])])]),t("blockquote",[t("p",[a._v("查看指定目录的所占空间：")])]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("du")]),a._v(" scf\n")])])]),t("blockquote",[t("p",[a._v("显示多个文件所占空间：")])]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("du")]),a._v(" log1.tar.gz log2.tar.gz\n")])])]),t("blockquote",[t("p",[a._v("只显示总和的大小:")])]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("du")]),a._v(" -s\n")])])]),t("blockquote",[t("p",[a._v("显示总和的大小且易读:")])]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("du")]),a._v(" -sh "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$dir")]),a._v("\n")])])]),t("h4",{attrs:{id:"iostat"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#iostat"}},[a._v("#")]),a._v(" iostat")]),a._v(" "),t("blockquote",[t("p",[a._v("被用于监视系统输入输出设备和CPU的使用情况。它的特点是汇报磁盘活动统计情况，同时也会汇报出CPU使用情况。同vmstat一样，iostat也有一个弱点，就是它不能对某个进程进行深入分析，仅对系统的整体情况进行分析。")])]),a._v(" "),t("h5",{attrs:{id:"选项-7"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#选项-7"}},[a._v("#")]),a._v(" 选项")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("-c：仅显示CPU使用情况；\n-d：仅显示设备利用率；\n-k：显示状态以千字节每秒为单位，而不使用块每秒；\n-m：显示状态以兆字节每秒为单位；\n-p：仅显示块设备和所有被使用的其他分区的状态；\n-t：显示每个报告产生时的时间；\n-V：显示版号并退出；\n-x：显示扩展状态。\n")])])]),t("h5",{attrs:{id:"参数-4"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参数-4"}},[a._v("#")]),a._v(" 参数")]),a._v(" "),t("ul",[t("li",[a._v("间隔时间：每次报告的间隔时间（秒）；")]),a._v(" "),t("li",[a._v("次数：显示报告的次数。")])]),a._v(" "),t("h5",{attrs:{id:"实例-8"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#实例-8"}},[a._v("#")]),a._v(" 实例")]),a._v(" "),t("blockquote",[t("p",[a._v("通"),t("code",[a._v("iostat")]),a._v("查看磁盘总体的读写情况：")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("[root@localhost ~]# iostat\nLinux 3.10.0-1062.el7.x86_64 (localhost.localdomain)    2020年05月02日  _x86_64_        (2 CPU)\n\navg-cpu:  %user   %nice %system %iowait  %steal   %idle\n           0.17    0.00    0.20    0.46    0.00   99.17\n\nDevice:            tps    kB_read/s    kB_wrtn/s    kB_read    kB_wrtn\nsda               1.56        30.45        39.61    4659620    6060644\nscd0              0.00         0.02         0.00       3102          0\ndm-0              1.96        30.01        38.42    4591998    5878155\ndm-1              0.09         0.09         0.30      13840      45328\n")])])]),t("ul",[t("li",[t("code",[a._v("tps")]),a._v("：该设备每秒的传输次数。")]),a._v(" "),t("li",[t("code",[a._v("kB_read/s")]),a._v("：每秒从设备（drive expressed）读取的数据量；")]),a._v(" "),t("li",[t("code",[a._v("kB_wrtn/s")]),a._v("：每秒向设备（drive expressed）写入的数据量；")]),a._v(" "),t("li",[t("code",[a._v("kB_read")]),a._v("：读取的总数据量；")]),a._v(" "),t("li",[t("code",[a._v("kB_wrtn")]),a._v("：写入的总数量数据量；")])]),a._v(" "),t("blockquote",[t("p",[a._v("查看磁盘详细读写情况")])]),a._v(" "),t("p",[a._v("通过"),t("code",[a._v("iostat -x 1 3")]),a._v("可以看到磁盘详细读写情况，没隔一秒输出一次一共输出3次，当看到I/O等待时间所占CPU时间的比重很高的时候，首先要检查的就是机器是否正在大量使用交换空间，同时关注"),t("code",[a._v("iowait")]),a._v("占比cpu的消耗是否很大，如果大说明磁盘存在大的瓶颈，同时关注"),t("code",[a._v("await")]),a._v("，表示磁盘的响应时间以便小于5ms：")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("[root@localhost ~]# iostat -x 1 3\nLinux 3.10.0-1062.el7.x86_64 (localhost.localdomain)    2020年05月02日  _x86_64_        (2 CPU)\n\navg-cpu:  %user   %nice %system %iowait  %steal   %idle\n           0.17    0.00    0.20    0.46    0.00   99.16\n\nDevice:         rrqm/s   wrqm/s     r/s     w/s    rkB/s    wkB/s avgrq-sz avgqu-sz   await r_await w_await  svctm  %util\nsda               0.01     0.49    0.63    0.95    30.59    39.78    89.58     0.34  214.23   49.16  323.48   8.55   1.34\nscd0              0.00     0.00    0.00    0.00     0.02     0.00    98.48     0.00    1.21    1.21    0.00   0.95   0.00\ndm-0              0.00     0.00    0.62    1.35    30.15    38.59    69.70     0.91  460.67   49.12  648.54   6.66   1.31\ndm-1              0.00     0.00    0.02    0.07     0.09     0.30     8.52     0.04  442.74   95.43  521.17   6.91   0.06\n")])])]),t("p",[t("code",[a._v("avg-cpu")]),a._v("表示总体cpu使用情况统计信息，对于多核cpu，这里为所有cpu的平均值：")]),a._v(" "),t("ul",[t("li",[t("code",[a._v("%user")]),a._v("：CPU处在用户模式下的时间百分比。")]),a._v(" "),t("li",[t("code",[a._v("%nice")]),a._v("：CPU处在带NICE值的用户模式下的时间百分比。")]),a._v(" "),t("li",[t("code",[a._v("%system")]),a._v("：CPU处在系统模式下的时间百分比。")]),a._v(" "),t("li",[t("code",[a._v("%iowait")]),a._v("：CPU等待输入输出完成时间的百分比，如果%iowait的值过高，表示硬盘存在I/O瓶颈。")]),a._v(" "),t("li",[t("code",[a._v("%steal")]),a._v("：管理程序维护另一个虚拟处理器时，虚拟CPU的无意识等待时间百分比。")]),a._v(" "),t("li",[t("code",[a._v("%idle")]),a._v("：CPU空闲时间百分比，如果%idle值高，表示CPU较空闲；如果%idle值高但系统响应慢时，可能是CPU等待分配内存，应加大内存容量；如果%idle值持续低于10，表明CPU处理能力相对较低，系统中最需要解决的资源是CPU。。")])]),a._v(" "),t("p",[t("code",[a._v("Device")]),a._v("表示设备信息：")]),a._v(" "),t("ul",[t("li",[t("code",[a._v("rrqm/s")]),a._v("：每秒对该设备的读请求被合并次数，文件系统会对读取同块(block)的请求进行合并")]),a._v(" "),t("li",[t("code",[a._v("wrqm/s")]),a._v("：每秒对该设备的写请求被合并次数")]),a._v(" "),t("li",[t("code",[a._v("r/s")]),a._v("：每秒完成的读次数")]),a._v(" "),t("li",[t("code",[a._v("w/s")]),a._v("：每秒完成的写次数")]),a._v(" "),t("li",[t("code",[a._v("rkB/s")]),a._v("：每秒读数据量(kB为单位)")]),a._v(" "),t("li",[t("code",[a._v("wkB/s")]),a._v("：每秒写数据量(kB为单位)")]),a._v(" "),t("li",[t("code",[a._v("avgrq-sz")]),a._v("：平均每次IO操作的数据量(扇区数为单位)")]),a._v(" "),t("li",[t("code",[a._v("avgqu-sz")]),a._v("：平均等待处理的IO请求队列长度")]),a._v(" "),t("li",[t("code",[a._v("await")]),a._v("：平均每次IO请求等待时间(包括等待时间和处理时间，毫秒为单位)")]),a._v(" "),t("li",[t("code",[a._v("svctm")]),a._v("：平均每次IO请求的处理时间(毫秒为单位)")]),a._v(" "),t("li",[t("code",[a._v("%util")]),a._v("：一秒中有百分之多少的时间用于 I/O如果%util接近100%，说明产生的I/O请求太多，I/O系统已经满负荷。"),t("code",[a._v("idle")]),a._v("小于70% IO压力就较大了，一般读取速度有较多的wait。")])]),a._v(" "),t("blockquote",[t("p",[t("strong",[a._v("!!")]),a._v(" "),t("code",[a._v("iostat -xmd 1 3")]),a._v("：新增"),t("code",[a._v("m")]),a._v("选项可以在输出是使用"),t("code",[a._v("M")]),a._v("为单位。")])])])}),[],!1,null,null,null);s.default=v.exports}}]);