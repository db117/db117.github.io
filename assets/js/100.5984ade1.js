(window.webpackJsonp=window.webpackJsonp||[]).push([[100],{376:function(t,n,s){"use strict";s.r(n);var a=s(10),e=Object(a.a)({},(function(){var t=this,n=t._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h3",{attrs:{id:"oap-server"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#oap-server"}},[t._v("#")]),t._v(" oap server")]),t._v(" "),n("blockquote",[n("p",[n("a",{attrs:{href:"https://github.com/apache/skywalking",target:"_blank",rel:"noopener noreferrer"}},[t._v("apache/skywalking: APM, Application Performance Monitoring System (github.com)"),n("OutboundLink")],1)]),t._v(" "),n("p",[n("a",{attrs:{href:"https://skywalking.apache.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Apache SkyWalking"),n("OutboundLink")],1)]),t._v(" "),n("p",[t._v("服务端主流程源码分析。")])]),t._v(" "),n("h4",{attrs:{id:"目录结构"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#目录结构"}},[t._v("#")]),t._v(" 目录结构")]),t._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("oap-server\n├── analyzer\t\t\t\t\t\t\t\t\t数据分析模块\n│   ├── agent-analyzer\t\t\t\t分析客户端发送的jvm，指标，trace 数据\n│   ├── event-analyzer\t\t\t\t分析事件\n│   ├── log-analyzer\t\t\t\t\t分析日志\n│   ├── meter-analyzer\t\t\t\t分析特定指标\n│   └── pom.xml\n├── exporter\n│   ├── pom.xml\n│   └── src\n├── microbench\t\t\t\t\t\t\t\t基准测试\n│   ├── pom.xml\n│   └── src\n├── oal-grammar\t\t\t\t\t\t\t\toal 相关\n│   ├── pom.xml\n│   └── src\n├── oal-rt\n│   ├── pom.xml\n│   └── src\n├── pom.xml\n├── server-alarm-plugin\t\t\t\t告警插件\n│   ├── pom.xml\n│   └── src\n├── server-cluster-plugin\t\t\t集群相关\n│   ├── cluster-consul-plugin\n│   ├── cluster-etcd-plugin\n│   ├── cluster-kubernetes-plugin\n│   ├── cluster-nacos-plugin\n│   ├── cluster-standalone-plugin\n│   ├── cluster-zookeeper-plugin\n│   └── pom.xml\n├── server-configuration\t\t\t动态配置相关\n│   ├── configuration-api\n│   ├── configuration-apollo\n│   ├── configuration-consul\n│   ├── configuration-etcd\n│   ├── configuration-k8s-configmap\n│   ├── configuration-nacos\n│   ├── configuration-zookeeper\n│   ├── grpc-configuration-sync\n│   └── pom.xml\n├── server-core\t\t\t\t\t\t\t\t核心模块\n│   ├── pom.xml\n│   └── src\n├── server-fetcher-plugin\t\t\t数据接收模块，可以从别的地方获取数据\n│   ├── kafka-fetcher-plugin\n│   ├── pom.xml\n│   └── prometheus-fetcher-plugin\n├── server-health-checker\t\t\t健康检查\n│   ├── pom.xml\n│   └── src\n├── server-library\t\t\t\t\t\t\n│   ├── library-client\t\t\t\t\t\t\t\t\t各种客户端\n│   ├── library-datacarrier-queue\t\t\t\t一个数据队列\n│   ├── library-elasticsearch-client\t\tes 客户端\n│   ├── library-module\t\t\t\t\t\t\t\t\tmodule 核心模块\n│   ├── library-server\t\t\t\t\t\t\t\t\tjetty 服务，grpc 服务\n│   ├── library-util\t\t\t\t\t\t\t\t\t\t各种工具类\n│   └── pom.xml\n├── server-query-plugin\n│   ├── pom.xml\n│   └── query-graphql-plugin\t\t\t\t\t\t前端 ui graphql查询接口\n├── server-receiver-plugin\t\t\t\t\t\t\t各种接收数据\n│   ├── configuration-discovery-receiver-plugin\n│   ├── envoy-metrics-receiver-plugin\n│   ├── otel-receiver-plugin\n│   ├── pom.xml\n│   ├── receiver-proto\n│   ├── skywalking-browser-receiver-plugin\n│   ├── skywalking-clr-receiver-plugin\n│   ├── skywalking-ebpf-receiver-plugin\n│   ├── skywalking-event-receiver-plugin\n│   ├── skywalking-jvm-receiver-plugin\n│   ├── skywalking-log-recevier-plugin\n│   ├── skywalking-management-receiver-plugin\n│   ├── skywalking-mesh-receiver-plugin\n│   ├── skywalking-meter-receiver-plugin\n│   ├── skywalking-profile-receiver-plugin\n│   ├── skywalking-sharing-server-plugin\n│   ├── skywalking-trace-receiver-plugin\n│   ├── skywalking-zabbix-receiver-plugin\n│   └── zipkin-receiver-plugin\n├── server-starter\t\t\t\t\t\t\t\t\t\t启动类\n│   ├── pom.xml\n│   └── src\n├── server-storage-plugin\t\t\t\t\t\t\t数据存储模块\n│   ├── pom.xml\n│   ├── storage-elasticsearch-plugin\n│   ├── storage-influxdb-plugin\n│   ├── storage-iotdb-plugin\n│   ├── storage-jdbc-hikaricp-plugin\n│   ├── storage-tidb-plugin\n│   └── storage-zipkin-elasticsearch-plugin\n├── server-telemetry\n│   ├── pom.xml\n│   ├── telemetry-api\n│   └── telemetry-prometheus\n├── server-testing\n│   ├── pom.xml\n│   ├── server-testing.iml\n│   └── src\n└── server-tools\n    ├── pom.xml\n    └── profile-exporter\n\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br"),n("span",{staticClass:"line-number"},[t._v("25")]),n("br"),n("span",{staticClass:"line-number"},[t._v("26")]),n("br"),n("span",{staticClass:"line-number"},[t._v("27")]),n("br"),n("span",{staticClass:"line-number"},[t._v("28")]),n("br"),n("span",{staticClass:"line-number"},[t._v("29")]),n("br"),n("span",{staticClass:"line-number"},[t._v("30")]),n("br"),n("span",{staticClass:"line-number"},[t._v("31")]),n("br"),n("span",{staticClass:"line-number"},[t._v("32")]),n("br"),n("span",{staticClass:"line-number"},[t._v("33")]),n("br"),n("span",{staticClass:"line-number"},[t._v("34")]),n("br"),n("span",{staticClass:"line-number"},[t._v("35")]),n("br"),n("span",{staticClass:"line-number"},[t._v("36")]),n("br"),n("span",{staticClass:"line-number"},[t._v("37")]),n("br"),n("span",{staticClass:"line-number"},[t._v("38")]),n("br"),n("span",{staticClass:"line-number"},[t._v("39")]),n("br"),n("span",{staticClass:"line-number"},[t._v("40")]),n("br"),n("span",{staticClass:"line-number"},[t._v("41")]),n("br"),n("span",{staticClass:"line-number"},[t._v("42")]),n("br"),n("span",{staticClass:"line-number"},[t._v("43")]),n("br"),n("span",{staticClass:"line-number"},[t._v("44")]),n("br"),n("span",{staticClass:"line-number"},[t._v("45")]),n("br"),n("span",{staticClass:"line-number"},[t._v("46")]),n("br"),n("span",{staticClass:"line-number"},[t._v("47")]),n("br"),n("span",{staticClass:"line-number"},[t._v("48")]),n("br"),n("span",{staticClass:"line-number"},[t._v("49")]),n("br"),n("span",{staticClass:"line-number"},[t._v("50")]),n("br"),n("span",{staticClass:"line-number"},[t._v("51")]),n("br"),n("span",{staticClass:"line-number"},[t._v("52")]),n("br"),n("span",{staticClass:"line-number"},[t._v("53")]),n("br"),n("span",{staticClass:"line-number"},[t._v("54")]),n("br"),n("span",{staticClass:"line-number"},[t._v("55")]),n("br"),n("span",{staticClass:"line-number"},[t._v("56")]),n("br"),n("span",{staticClass:"line-number"},[t._v("57")]),n("br"),n("span",{staticClass:"line-number"},[t._v("58")]),n("br"),n("span",{staticClass:"line-number"},[t._v("59")]),n("br"),n("span",{staticClass:"line-number"},[t._v("60")]),n("br"),n("span",{staticClass:"line-number"},[t._v("61")]),n("br"),n("span",{staticClass:"line-number"},[t._v("62")]),n("br"),n("span",{staticClass:"line-number"},[t._v("63")]),n("br"),n("span",{staticClass:"line-number"},[t._v("64")]),n("br"),n("span",{staticClass:"line-number"},[t._v("65")]),n("br"),n("span",{staticClass:"line-number"},[t._v("66")]),n("br"),n("span",{staticClass:"line-number"},[t._v("67")]),n("br"),n("span",{staticClass:"line-number"},[t._v("68")]),n("br"),n("span",{staticClass:"line-number"},[t._v("69")]),n("br"),n("span",{staticClass:"line-number"},[t._v("70")]),n("br"),n("span",{staticClass:"line-number"},[t._v("71")]),n("br"),n("span",{staticClass:"line-number"},[t._v("72")]),n("br"),n("span",{staticClass:"line-number"},[t._v("73")]),n("br"),n("span",{staticClass:"line-number"},[t._v("74")]),n("br"),n("span",{staticClass:"line-number"},[t._v("75")]),n("br"),n("span",{staticClass:"line-number"},[t._v("76")]),n("br"),n("span",{staticClass:"line-number"},[t._v("77")]),n("br"),n("span",{staticClass:"line-number"},[t._v("78")]),n("br"),n("span",{staticClass:"line-number"},[t._v("79")]),n("br"),n("span",{staticClass:"line-number"},[t._v("80")]),n("br"),n("span",{staticClass:"line-number"},[t._v("81")]),n("br"),n("span",{staticClass:"line-number"},[t._v("82")]),n("br"),n("span",{staticClass:"line-number"},[t._v("83")]),n("br"),n("span",{staticClass:"line-number"},[t._v("84")]),n("br"),n("span",{staticClass:"line-number"},[t._v("85")]),n("br"),n("span",{staticClass:"line-number"},[t._v("86")]),n("br"),n("span",{staticClass:"line-number"},[t._v("87")]),n("br"),n("span",{staticClass:"line-number"},[t._v("88")]),n("br"),n("span",{staticClass:"line-number"},[t._v("89")]),n("br"),n("span",{staticClass:"line-number"},[t._v("90")]),n("br"),n("span",{staticClass:"line-number"},[t._v("91")]),n("br"),n("span",{staticClass:"line-number"},[t._v("92")]),n("br"),n("span",{staticClass:"line-number"},[t._v("93")]),n("br"),n("span",{staticClass:"line-number"},[t._v("94")]),n("br"),n("span",{staticClass:"line-number"},[t._v("95")]),n("br"),n("span",{staticClass:"line-number"},[t._v("96")]),n("br"),n("span",{staticClass:"line-number"},[t._v("97")]),n("br"),n("span",{staticClass:"line-number"},[t._v("98")]),n("br"),n("span",{staticClass:"line-number"},[t._v("99")]),n("br"),n("span",{staticClass:"line-number"},[t._v("100")]),n("br"),n("span",{staticClass:"line-number"},[t._v("101")]),n("br"),n("span",{staticClass:"line-number"},[t._v("102")]),n("br"),n("span",{staticClass:"line-number"},[t._v("103")]),n("br"),n("span",{staticClass:"line-number"},[t._v("104")]),n("br"),n("span",{staticClass:"line-number"},[t._v("105")]),n("br")])]),n("h5",{attrs:{id:"主要类以及接口"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#主要类以及接口"}},[t._v("#")]),t._v(" 主要类以及接口")]),t._v(" "),n("ul",[n("li",[t._v("OAPServerStartUp：启动类")]),t._v(" "),n("li",[t._v("ApplicationConfigLoader：加载配置")]),t._v(" "),n("li",[t._v("ModuleManager：加载各种模块")]),t._v(" "),n("li",[t._v("ModuleProvider：提供服务类，主要通过 "),n("code",[t._v("prepare")]),t._v("，"),n("code",[t._v("start")]),t._v("，"),n("code",[t._v("notifyAfterCompleted")]),t._v("实现各种个功能")]),t._v(" "),n("li",[t._v("ModuleConfig：各种插件配置类")]),t._v(" "),n("li",[t._v("ISource：数据对象")]),t._v(" "),n("li",[t._v("GRPCHandlerRegister：GRPC 处理器注册")]),t._v(" "),n("li",[t._v("JettyHandlerRegister：jetty 处理器注册")])]),t._v(" "),n("h3",{attrs:{id:"java-agent"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#java-agent"}},[t._v("#")]),t._v(" Java agent")]),t._v(" "),n("blockquote",[n("p",[t._v("Java 客户端,搜集各种数据发送到服务端。")]),t._v(" "),n("p",[n("a",{attrs:{href:"https://github.com/apache/skywalking-java",target:"_blank",rel:"noopener noreferrer"}},[t._v("apache/skywalking-java: The Java agent for Apache SkyWalking (github.com)"),n("OutboundLink")],1)])]),t._v(" "),n("h4",{attrs:{id:"目录结构-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#目录结构-2"}},[t._v("#")]),t._v(" 目录结构")]),t._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v(".\n├── apm-application-toolkit  \t\t\t\t一些工具类，仅仅是接口，具体实现在 apm-toolkit-activation 中\n├── apm-protocol\t\t\t\t\t\t\t\t\t\tProtocol协议定义了各种数据格式，以及通信格式等\n├── apm-sniffer\t\t\t\t\t\t\t\t\t\t\t核心代码\n│   ├── apm-agent\t\t\t\t\t\t\t\t\t\t插件入口\n│   ├── apm-agent-core\t\t\t\t\t\t\t核心代码\n│   ├── apm-sdk-plugin\t\t\t\t\t\t\t所有插件的父项目，以及大部分插件\n│   ├── apm-test-tools\t\t\t\t\t\t\t\n│   ├── apm-toolkit-activation\t\t\tapm-application-toolkit 的具体实现\n│   ├── bootstrap-plugins\n│   ├── config\n│   ├── optional-plugins\n│   ├── optional-reporter-plugins\n├── changes\t\t\t\t\t\t\t\t\t\t\t\t\t变更记录\n├── docs\t\t\t\t\t\t\t\t\t\t\t\t\t\t文档\n\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br")])]),n("h4",{attrs:{id:"流程图"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#流程图"}},[t._v("#")]),t._v(" 流程图")]),t._v(" "),n("iframe",{staticStyle:{display:"block",width:"725px",height:"245px"},attrs:{id:"embed_dom",name:"embed_dom",frameborder:"0",src:"https://www.processon.com/embed/621347b66376897c8c8308a3"}}),t._v(" "),n("h4",{attrs:{id:"主要类"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#主要类"}},[t._v("#")]),t._v(" 主要类")]),t._v(" "),n("ul",[n("li",[t._v("SkyWalkingAgent：启动类")]),t._v(" "),n("li",[t._v("Config：所有配置都在这个类中。")]),t._v(" "),n("li",[t._v("BootService：所有服务的顶级接口")]),t._v(" "),n("li",[t._v("TracingContext：核心类，主要用来创建 span")]),t._v(" "),n("li",[t._v("GlobalIdGenerator：生成 "),n("code",[t._v("traceId")]),t._v(" ，第一部分为"),n("code",[t._v("实例 id")]),t._v("，第二部分为"),n("code",[t._v("线程 id")]),t._v("，第三部分为时间戳（毫秒）+当前线程中的序列号[0,9999]")]),t._v(" "),n("li",[t._v("AbstractSpan：各种插件使用")])]),t._v(" "),n("h2",{attrs:{id:""}},[n("a",{staticClass:"header-anchor",attrs:{href:"#"}},[t._v("#")])])])}),[],!1,null,null,null);n.default=e.exports}}]);